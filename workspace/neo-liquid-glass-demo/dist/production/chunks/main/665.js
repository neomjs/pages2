"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[665,880],{665:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(880);class i extends a.default{static config={className:"Neo.main.addon.PrefixField",accept_:null,pattern_:null,remote:{app:["initialize","destroy","updateAccept","updatePattern","updateSlots"]},slots_:null};elIds=new Map;prev;back=!1;destroy(){}initialize(e){const t=this;t.elId=e.elId,t.el=document.getElementById(e.elId);const s=t.pattern=e.pattern,a=t.slots=new Set(e.slots||"_");var i;t.accept=e.accept,t.prev=(i=0,Array.from(s,((e,t)=>a.has(e)?i=t+1:i))),t.first=[...s].findIndex((e=>a.has(e))),t.addListeners(),t.addCss()}addCss(){this.el.classList.add("tiny-prefix-field-input")}addListeners(){const e=this,t=e.el,s=e.format.bind(e);t.addEventListener("keypress",e.onKeyDown.bind(e)),t.addEventListener("input",s),t.addEventListener("focusin",s),t.addEventListener("focusout",e.onBlur.bind(e))}onBlur(){const e=this.pattern,t=this.el;return t.value===e&&(t.value="")}onKeyDown(e){this.back="Backspace"===e.key}clean(e){this.el;const t=new RegExp(this.accept||"\\d","g"),s=this.pattern,a=this.slots;return e=e.match(t)||[],Array.from(s,(t=>(e[0]===t||a.has(t))&&e.shift()||t))}format(){const e=this,t=this.el,s=this.prev,a=this.clean.bind(this);console.log(t.selectionStart,t.selectionEnd);const[i,l]=[t.selectionStart,t.selectionEnd].map((i=>(i=a(t.value.slice(0,i)).findIndex((t=>e.slots.has(t))))<0?s[s.length-1]:e.back?s[i-1]||e.first:i));t.value=a(t.value).join``,t.setSelectionRange(i,l),this.back=!1}}const l=Neo.setupClass(i)},880:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(607);class i extends a.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let t=this;t.loadFiles&&(0===t.preloadFilesDelay?t.loadFiles():Neo.isNumber(t.preloadFilesDelay)&&(t.loadingTimeoutId=setTimeout((()=>{t.loadFiles()}),t.preloadFilesDelay)))}afterSetIsReady(e,t){if(e){let e,t=this;t.cache.forEach((s=>{e=t[s.fn](s.data),s.resolve(e)})),t.cache=[]}}cacheMethodCall(e){let t=this;return t.isLoading||(t.loadingTimeoutId&&clearTimeout(t.loadingTimeoutId),t.loadingTimeoutId=null,t.loadFiles()),new Promise(((s,a)=>{t.cache.push({...e,resolve:s})}))}}const l=Neo.setupClass(i)}}]);