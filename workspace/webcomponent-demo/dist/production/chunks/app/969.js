"use strict";(self.webpackChunkneo_webcomponents_demo=self.webpackChunkneo_webcomponents_demo||[]).push([[969],{993:(e,t,d)=>{d.d(t,{Z:()=>i});var n=d(74);class o extends n.Z{static getConfig(){return{className:"Neo.util.Style"}}static compareStyles(e,t){let d={};return Neo.isString(e)&&(e=Neo.core.Util.createStyleObject(e)),Neo.isString(t)&&(t=Neo.core.Util.createStyleObject(t)),e||t?t?e?(Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&t[n]===e[n]||(d[n]=e[n])})),Object.keys(t).forEach((function(t){e.hasOwnProperty(t)||(d[t]=null)})),Object.keys(d).length>0?d:null):void Object.keys(t).forEach((function(e){d[e]=null})):Neo.clone(e):null}}Neo.applyClassConfig(o);const i=o},969:(e,t,d)=>{d.r(t),d.d(t,{default:()=>c});var n=d(74),o=d(565),i=d(993);class r{constructor(e){Object.assign(this,{attributes:e.attributes||[],childNodes:e.childNodes||[],className:e.className||[],id:e.id||Neo.getId("vnode"),innerHTML:e.innerHTML,nodeName:e.nodeName,style:e.style,vtype:e.vtype||"vnode"})}}Neo.ns("Neo.vdom",!0).VNode=r;var a=d(562);class s extends n.Z{returnChildNodeOuterHtml=!1;voidAttributes=["checked","required"];voidElements=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];static getConfig(){return{className:"Neo.vdom.Helper",remote:{app:["create","update"]},singleton:!0}}create(e){let t,d=e.appName,n=!0===e.autoMount,o=e.parentId,i=e.parentIndex;return delete e.appName,delete e.autoMount,delete e.parentId,delete e.parentIndex,t=this.parseHelper(e),t.outerHTML=this.createStringFromVnode(t),n&&Object.assign(t,{appName:d,autoMount:!0,parentId:o,parentIndex:i}),Neo.config.useVdomWorker?t:Promise.resolve(t)}createCloseTag(e){return this.voidElements.indexOf(e.nodeName)>-1?"":"</"+e.nodeName+">"}createDeltas(e){let t,d,n,r,s,l,c,p,h,u,N,m,f,v,g,y=this,b=e.deltas||[],V=e.index,x=e.newVnode,k=e.newVnodeRoot||x,I=e.oldVnode,O=e.oldVnodeRoot||I,w=e.parentId;if(x&&!I)O&&(h=y.findVnode(O,x.id,I)),h||b.push({action:"insertNode",id:x.id,index:V,outerHTML:y.createStringFromVnode(x),parentId:w});else if(!x&&I)k&&(p=y.findVnode(k,I.id,x)),p?(b.push({action:"moveNode",id:I.id,index:p.index,parentId:p.parentNode.id}),h=y.findVnode(O,p.parentNode.id),y.createDeltas({deltas:b,newVnode:p.vnode,newVnodeRoot:k,oldVnode:I,oldVnodeRoot:O,parentId:p.parentNode.id}),h.vnode.childNodes.splice(p.index,0,p.vnode)):b.push({action:"removeNode",id:I.id});else{if(x&&I&&x.id!==I.id){if(p=y.findVnode(k,I.id,x),h=y.findVnode(O,x.id,I),!p&&!h)return b.push({action:"removeNode",id:I.id}),b.push({action:"insertNode",id:x.id,index:V,outerHTML:y.createStringFromVnode(x),parentId:w}),{indexDelta:0};if(p&&h&&p.parentNode.id===h.parentNode.id)b.push({action:"moveNode",id:h.vnode.id,index:V,parentId:w}),y.createDeltas({deltas:b,newVnode:x,newVnodeRoot:k,oldVnode:h.vnode,oldVnodeRoot:O,parentId:p.parentNode.id});else{if(!p&&h){if(x.id===h.vnode.id){if(s=0,a.Z.findChildVnodeById(I,x.id))b.push({action:"replaceChild",fromId:I.id,parentId:w,toId:x.id});else{let e=a.Z.findChildVnode(O,h.vnode.id),t=a.Z.findChildVnode(O,I.id);if(s=1,e.parentNode.id===t.parentNode.id){let d=a.Z.findChildVnode(k,x.id),n=V+1;for(r=V+1,v=t.parentNode.childNodes,c=e.index;r<c;r++)a.Z.findChildVnode(d.parentNode,v[r].id)||n++;e.parentNode.childNodes.splice(e.index,1),e.index!==n&&b.push({action:"moveNode",id:h.vnode.id,index:V,parentId:w}),s=0}b.push({action:"removeNode",id:I.id,parentId:w})}return y.createDeltas({deltas:b,newVnode:x,newVnodeRoot:k,oldVnode:h.vnode,oldVnodeRoot:O,parentId:w}),{indexDelta:s}}return b.push({action:"removeNode",id:I.id}),{indexDelta:1}}if(!h)return g=p&&a.Z.findChildVnodeById(x,I.id),g&&b.push({action:"removeNode",id:p.vnode.id}),b.push({action:"insertNode",id:x.id,index:V,outerHTML:y.createStringFromVnode(x),parentId:w}),{indexDelta:g?0:-1};if(p){s=0;let e=a.Z.findChildVnode(k,x.id),t=e.parentNode.id===p.parentNode.id;return t&&e.index>p.index&&(s=e.index-p.index),t&&e.parentNode.childNodes[p.index].id===p.vnode.id||b.push({action:"moveNode",id:p.vnode.id,index:p.index,parentId:p.parentNode.id}),y.createDeltas({deltas:b,newVnode:p.vnode,newVnodeRoot:k,oldVnode:I,oldVnodeRoot:O,parentId:p.parentNode.id}),{indexDelta:0}}}}x&&I&&x.id===I.id&&("text"===x.vtype&&x.innerHTML!==I.innerHTML?b.push({action:"updateVtext",id:x.id,parentId:a.Z.findChildVnode(k,x.id).parentNode.id,value:x.innerHTML}):(l=Object.keys(x),Object.keys(I).forEach((e=>{x.hasOwnProperty(e)?"attributes"===e&&Object.keys(I[e]).forEach((t=>{x[e].hasOwnProperty(t)||(x[e][t]=null)})):l.push(e)})),l.forEach((e=>{switch(d={},n=x[e],e){case"attributes":t={},Object.entries(n).forEach((([e,d])=>{I.attributes.hasOwnProperty(e)&&I.attributes[e]===d||!Neo.isString(d)&&Neo.isEmpty(d)||(t[e]=d)})),Object.keys(t).length>0&&(d.attributes=t,Object.entries(t).forEach((([e,t])=>{null!==t&&""!==t||delete x.attributes[e]})));break;case"childNodes":for(r=0,s=0,c=Math.max(n.length,I.childNodes.length);r<c;r++)f=y.createDeltas({deltas:b,index:r,newVnode:n[r],newVnodeRoot:k,oldVnode:I.childNodes[r+s],oldVnodeRoot:O,parentId:x.id}),f&&f.indexDelta&&(s+=f.indexDelta);if(s<0)for(r=n.length+s;r<I.childNodes.length;r++)b.push({action:"removeNode",id:I.childNodes[r].id});break;case"nodeName":case"innerHTML":n!==I[e]&&(d[e]=n);break;case"style":u=i.Z.compareStyles(n,I.style),u&&(d.style=u);break;case"className":I.className?(N=o.Z.difference(n,I.className),m=o.Z.difference(I.className,n)):(N=n,m=[]),(N.length>0||m.length>0)&&(d.cls={add:N,remove:m})}Object.keys(d).length>0&&(d.id=x.id,b.push(d))}))))}return b}createOpenTag(e){let t,d="<"+e.nodeName,n=e.attributes,o=e.className;return e.style&&(t=Neo.createStyles(e.style),""!==t&&(d+=` style="${t}"`)),o&&(Array.isArray(o)&&(o=o.join(" ")),""!==o&&(d+=` class="${o}"`)),e.id&&(Neo.config.useDomIds?d+=` id="${e.id}"`:d+=` data-neo-id="${e.id}"`),Object.entries(n).forEach((([e,t])=>{this.voidAttributes.includes(e)?"true"===t&&(d+=` ${e}`):"removeDom"!==e&&(d+=` ${e}="${t}"`)})),d+">"}createStringFromVnode(e){let t=this;switch(e.vtype){case"root":return t.createStringFromVnode(e.childNodes[0]);case"text":return void 0===e.innerHTML?"":String(e.innerHTML);case"vnode":return t.createOpenTag(e)+t.createTagContent(e)+t.createCloseTag(e);default:return""}}createTagContent(e){if(e.innerHTML)return e.innerHTML;let t,d,n="",o=e.childNodes?e.childNodes.length:0,i=0;for(;i<o;i++)t=e.childNodes[i],d=this.createStringFromVnode(t),t.innerHTML!==d&&this.returnChildNodeOuterHtml&&(t.outerHTML=d),n+=d;return n}findVnode(e,t,d,n){n||(n=0);let o,i,r,a,s=null;if(e.id===t)s={index:n,parentNode:d,vnode:e};else if("text"!==e.vtype)for(o=e.childNodes,r=0,a=o?.length||0;r<a;r++)if(i=this.findVnode(o[r],t,e,r),i&&i.vnode.id===t){s=i;break}return s&&"root"===s.parentId&&(s.index=null),s}parseHelper(e){if(!0===e.removeDom)return null;if("text"===e.vtype)return e.id||(e.id=Neo.getId("vtext")),e.innerHTML=`\x3c!-- ${e.id} --\x3e${e.html||""}\x3c!-- /neo-vtext --\x3e`,delete e.html,e;let t,d=this,n={attributes:{},childNodes:[],style:{}};return e.tag||(e.tag="div"),Object.entries(e).forEach((([e,o])=>{let i,r,a;if(null!=o&&"flag"!==e)switch(e){case"tag":case"nodeName":n.nodeName=o;break;case"html":case"innerHTML":n.innerHTML=o.toString();break;case"children":case"childNodes":case"cn":Array.isArray(o)||(o=[o]),r=[],o.forEach((e=>{!0!==e.removeDom&&(delete e.removeDom,t=d.parseHelper(e),t&&r.push(t))})),n.childNodes=r;break;case"cls":o&&!Array.isArray(o)?n.className=[o]:Array.isArray(o)&&o.length<1||(n.className=o);break;case"height":case"maxHeight":case"maxWidth":case"minHeight":case"minWidth":case"width":i=o!=parseInt(o),n.style[e]=o+(i?"":"px");break;case"id":n.id=o;break;case"style":a=n.style,Neo.isString(o)?n.style=Object.assign(a,Neo.core.Util.createStyleObject(o)):n.style=Object.assign(a,o);break;default:"removeDom"!==e&&(n.attributes[e]=o+"")}})),new r(n)}update(e){let t=this.parseHelper(e.vdom),d={deltas:this.createDeltas({newVnode:t,oldVnode:e.vnode}),updateVdom:!0,vnode:t};return Neo.config.useVdomWorker?d:Promise.resolve(d)}}Neo.applyClassConfig(s);let l=Neo.create(s);Neo.applyToGlobalNs(l);const c=l}}]);