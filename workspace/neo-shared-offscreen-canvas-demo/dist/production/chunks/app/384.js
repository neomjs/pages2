"use strict";(self.webpackChunkmainapp=self.webpackChunkmainapp||[]).push([[384],{384:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(74);class s extends i.Z{static getConfig(){return{className:"Neo.plugin.Base",ntype:"plugin",owner:null}}construct(e){super.construct(e);let t=this;t.owner.mounted?t.onOwnerMounted():t.owner.on("mounted",t.onOwnerMounted,t)}onOwnerMounted(){}}Neo.applyClassConfig(s);const o=s;class r extends i.Z{static getConfig(){return{className:"Neo.util.Css"}}static deleteRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.deleteCssRules({rules:e})}static insertRules(e){Array.isArray(e)||(e=[e]),Neo.main.addon.Stylesheet.insertCssRules({rules:e})}}Neo.applyClassConfig(r);const a=r;class l extends o{static getStaticConfig(){return{transitionEasings:["ease","ease-in","ease-out","ease-in-out","linear"]}}static getConfig(){return{className:"Neo.list.plugin.Animate",columns:null,itemMargin:10,ownerRect:null,rows:null,transitionDuration_:500,transitionEasing_:"ease-in-out",transitionTimeoutId:null}}construct(e){super.construct(e);let t=this,n=t.owner;n.itemHeight&&n.itemWidth||console.error("list.plugin.Animate requires fixed itemHeight and itemWidth values",n),t.adjustCreateItem(),n.onStoreFilter=t.onStoreFilter.bind(t),n.onStoreSort=t.onStoreSort.bind(t),this.updateTransitionDetails(!1)}adjustCreateItem(){let e=this,t=e.owner;e.ownerCreateItem=t.createItem.bind(t),t.createItem=e.createItem.bind(t,e)}afterSetTransitionDuration(e,t){this.isConstructed&&this.updateTransitionDetails(Neo.isNumber(t))}afterSetTransitionEasing(e,t){this.isConstructed&&this.updateTransitionDetails(!!t)}beforeSetTransitionEasing(e,t){return this.beforeSetEnumValue(e,t,"transitionEasing")}createItem(e,t,n){let i=e.ownerCreateItem(t,n),s=e.owner,o=e.getItemPosition(t,n),r=i.style||{};return e.ownerRect?(Object.assign(r,{height:`${s.itemHeight}px`,position:"absolute",transform:`translate(${o.x}px, ${o.y}px)`,width:`${s.itemWidth}px`}),i.style=r,i):null}getItemPosition(e,t){let n=this,i=t%n.columns,s=n.itemMargin,o=n.owner,r=Math.floor(t/n.columns);return{x:i*(s+o.itemWidth)+s,y:r*(s+o.itemHeight)+s}}getItemIndex(e,t,n){if(!n)return e.index;let i=this.owner,s=i.getKeyProperty();return t.indexOf(i.getItemId(e.record[s]))}onOwnerMounted(){let e=this,t=e.owner;t.getDomRect().then((n=>{Object.assign(e,{columns:Math.floor(n.width/t.itemWidth),ownerRect:n,rows:Math.floor(n.height/t.itemHeight)}),t.store.getCount()>0&&t.createItems()}))}onStoreFilter(e){let t,n,i,s,o=this,r=o.owner,a=r.getKeyProperty(),l=!1,m=[],u=[],d=[],c=o.transitionTimeoutId,p=!!c,g=r.vdom;c&&(clearTimeout(c),o.transitionTimeoutId=null),i=p?g.cn.map((e=>e.id)):[],e.items.forEach(((t,s)=>{n={index:s,record:t},e.oldItems.includes(t)?u.push(n):(p&&i.includes(r.getItemId(t[a]))&&(n.reAdded=!0),m.push(n))})),e.oldItems.forEach(((t,n)=>{e.items.includes(t)||d.push({index:n,record:t})})),m.forEach((e=>{e.reAdded||(t=o.getItemIndex(e,i,p),t>-1&&(l=!0,g.cn.splice(t,0,o.createItem(o,e.record,e.index)),e.item=g.cn[t],e.item.style.opacity=0))})),l&&(r.vdom=g),setTimeout((()=>{g=r.vdom,i=g.cn.map((e=>e.id)),m.forEach((e=>{t=o.getItemIndex(e,i,p),t>-1&&(g.cn[t].style.opacity=1)})),u.forEach((e=>{t=o.getItemIndex(e,i,!0),t>-1&&(s=o.getItemPosition(e.record,e.index),Object.assign(g.cn[t].style,{opacity:1,transform:`translate(${s.x}px, ${s.y}px)`}))})),d.forEach((e=>{t=o.getItemIndex(e,i,p),t>-1&&(e.item=g.cn[t],e.item.style.opacity=0)})),r.vdom=g,o.triggerTransitionCallback()}),50)}onStoreSort(e){let t=this;Neo.list.Component&&t.owner instanceof Neo.list.Component?t.sortComponentList(e):t.sortBaseList(e)}sortBaseList(e){let t,n=!1,i=this.owner,s=i.getKeyProperty(),o=[],r=e.previousItems.map((e=>e[s])),a=i.vdom;a.cn.length>0&&(e.items.forEach(((e,i)=>{t=r.indexOf(e[s]),o.push(a.cn[t]),t!==i&&(n=!0)})),n&&(i.vdom.cn=o,i.vdom=a,setTimeout((()=>{i.createItems()}),50)))}sortComponentList(e){let t,n,i,s=this,o=s.owner,r=o.getKeyProperty(),a=e.previousItems.map((e=>e[r])),l=o.vdom;o.sortItems(e),a=o.items.map((e=>o.getItemRecordId(e[r]))),l.cn.length>0&&(e.items.forEach(((e,o)=>{t=a.indexOf(e[r]),n=l.cn[t],i=s.getItemPosition(e,o),n.style.transform=`translate(${i.x}px, ${i.y}px)`})),o.vdom=l)}triggerTransitionCallback(){let e=this;e.transitionTimeoutId=setTimeout((()=>{e.transitionTimeoutId=null,e.owner.createItems()}),e.transitionDuration)}updateTransitionDetails(e){let t=this,n=t.transitionDuration,i=t.transitionEasing,s=t.owner.id;e&&a.deleteRules(`#${s} .neo-list-item`),a.insertRules([`#${s} .neo-list-item {`,`transition: opacity ${n}ms ${i}, transform ${n}ms ${i}`,"}"].join(""))}}Neo.applyClassConfig(l);const m=l}}]);