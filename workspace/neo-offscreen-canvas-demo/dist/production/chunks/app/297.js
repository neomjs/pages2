"use strict";(self.webpackChunkneo_offscreen_canvas_demo=self.webpackChunkneo_offscreen_canvas_demo||[]).push([[297],{297:(e,t,n)=>{n.r(t),n.d(t,{onStart:()=>l});var a=n(593),i=n(696),o=n(168),s=n(682);class r extends s.Z{static getConfig(){return{className:"Neo.component.Canvas",ntype:"canvas",offscreen:!0,offscreenRegistered_:!1,_vdom:{tag:"canvas"}}}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this,a=n.getCanvasId(),i=Neo.currentWorker;e&&n.offscreen&&i.promiseMessage("main",{action:"getOffscreenCanvas",nodeId:a}).then((e=>{i.promiseMessage("canvas",{action:"registerCanvas",node:e.offscreen,nodeId:a},[e.offscreen]).then((()=>{n.offscreenRegistered=!0}))}))}getCanvasId(){return this.id}}Neo.applyClassConfig(r);class m extends r{static getConfig(){return{className:"MyApp.view.WebGlComponent",_vdom:{tag:"d3fc-canvas",cn:[{tag:"canvas"}]}}}afterSetId(e,t){this.vdom.cn[0].id=`${e}__canvas`,super.afterSetId(e,t)}afterSetOffscreenRegistered(e,t){if(e){let e=this,t=e.domListeners;t.push({measure:e.onMeasure,scope:e}),e.domListeners=t,setTimeout((()=>{MyApp.canvas.Helper.renderSeries(this.getCanvasId()),Neo.main.DomAccess.getBoundingClientRect({id:e.id}).then((t=>{e.updateSize(t.height,t.width)}))}),100)}}getCanvasId(){return this.vdom.cn[0].id}onMeasure(e){let t=e.path[0];this.updateSize(t.clientHeight,t.clientWidth)}updateSize(e,t){MyApp.canvas.Helper.updateSize({height:e,width:t})}}Neo.applyClassConfig(m);class c extends o.Z{static getConfig(){return{className:"MyApp.view.MainContainer",autoMount:!0,layout:{ntype:"vbox",align:"stretch"}}}constructor(e){super(e);let t=this;t.items=[{ntype:"container",flex:1,items:[m],layout:{ntype:"fit"},vdom:{tag:"d3fc-group","auto-resize":!0,cn:[]}},{module:i.Z,flex:"none",items:[{handler:t.onStopAnimationButtonClick.bind(t),text:"Stop Animation"},{handler:t.onStopMainButtonClick.bind(t),style:{marginLeft:".2em"},text:"Stop Main"},{handler:t.changeItemAmount.bind(t,1e4),pressed:!0,style:{marginLeft:"2em"},text:`${1e4.toLocaleString()} items`,toggleGroup:"itemAmount",value:1e4},{handler:t.changeItemAmount.bind(t,1e5),style:{marginLeft:".2em"},text:`${1e5.toLocaleString()} items`,toggleGroup:"itemAmount",value:1e5},{handler:t.changeItemAmount.bind(t,1e6),style:{marginLeft:".2em"},text:`${1e6.toLocaleString()} items`,toggleGroup:"itemAmount",value:1e6},{module:a.Z,reference:"time-label",style:{marginLeft:"2em"},text:`Time: ${t.getTime()}`}]}]}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&setInterval((()=>{this.down({reference:"time-label"}).text=`Time: ${this.getTime()}`}),1e3)}changeItemAmount(e){MyApp.canvas.Helper.changeItemsAmount(e),this.items[1].items.forEach((t=>{"itemAmount"===t.toggleGroup&&(t.pressed=t.value===e)}))}getTime(){return(new Date).toLocaleString(Neo.config.locale,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}onStopAnimationButtonClick(e){let t,n=!0;"Stop Animation"===e.component.text?(t="Start Animation",n=!1):t="Stop Animation",e.component.text=t,MyApp.canvas.Helper.enableAnimation(n)}onStopMainButtonClick(e){Neo.Main.alert(["This alert pauses the JS main thread.\n\n","Notice that the time inside the bottom toolbar has stopped updating.\n\n","Closing this alert will resume the main thread."].join(""))}}Neo.applyClassConfig(c);const l=()=>Neo.app({appPath:"apps/myapp/",mainView:c,name:"MyApp"})}}]);