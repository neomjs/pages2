"use strict";(self.webpackChunkneo_offscreen_canvas_demo=self.webpackChunkneo_offscreen_canvas_demo||[]).push([[646],{658:(e,t,o)=>{o.d(t,{A:()=>r});var i=o(9970);class n extends i.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"],monitorSize_:!1};afterSetMounted(e,t){super.afterSetMounted(e,t);let o=this;e&&o.monitorSize&&o.addDomListeners([{resize:o.onDomResize,scope:o}])}onConstructed(){super.onConstructed();let{appName:e,windowId:t}=this;this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:e,cls:["neo-body-viewport"],windowId:t})}onDomResize(e){this.fire("resize",e)}}const r=Neo.setupClass(n)},2004:(e,t,o)=>{o.d(t,{A:()=>k});var i=o(3607),n=o(4330),r=o(7973),s=o(7732),a=o(6846);class d extends i.A{static config={className:"Neo.util.KeyNavigation",ntype:"keynav",component_:null,keyDownEventBubble:!1,keys_:null};add(e){this._keys.push(...this.parseKeys(e))}beforeGetComponent(){return Neo.getComponent(this._component)}beforeSetComponent(e){return e?.id}destroy(){this.unregister(),super.destroy()}onKeyDown(e){if(e.key){let t,o=this,i=e.key.toUpperCase();i=o.parseUpperCaseKey(i),o.keys.forEach((n=>{t=Neo.isString(n.scope)?Neo.get(n.scope):n.scope,n.key.toUpperCase()===i&&(Neo.isFunction(n.fn)?n.fn.apply(t,[e,o.component]):t[n.fn]?.apply(t,[e,o.component]))}))}}parseKeys(e){if(!Array.isArray(e)){let t=this._component,o=[];t&&(Object.entries(e).forEach((([i,n])=>{"scope"!==i&&o.push({fn:n,key:i,scope:e.scope||t})})),e=o)}return e}parseUpperCaseKey(e){switch(e){case" ":e="SPACE";break;case"ARROWDOWN":e="DOWN";break;case"ARROWLEFT":e="LEFT";break;case"ARROWRIGHT":e="RIGHT";break;case"ARROWUP":e="UP"}return e}register(e){let t=this;t.component=e,t.keys=t.parseKeys(t.keys),e.addDomListeners({keydown:{bubble:t.keyDownEventBubble,fn:t.onKeyDown,scope:t}})}removeKey(e){let t,o=this._keys,i=0,n=o.length;for(;i<n;i++)if(t=o[i],Neo.isEqual(t,e)){a.A.remove(o,t);break}}removeKeys(e){Array.isArray(e)&&e.forEach((e=>this.removeKey(e)))}unregister(){}}const l=Neo.setupClass(d);o(7863),o(235);const p=Object.freeze([]),h=(e=0)=>{switch(Array.isArray(e)||(e=[e]),e.length){case 1:return e.length=4,e.fill(e[0],1,4);case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]]}return e},c=e=>{const t=m[e.ourEdge],o=m[e.theirEdge];return`${t}${e.ourEdgeOffset}${e.ourEdgeUnit}-${o}${e.theirEdgeOffset}${e.theirEdgeUnit}`},u=e=>{const t=e instanceof DOMRect?e:(1===e?.nodeType?e:"string"==typeof e?document.getElementById(e):null)?.getBoundingClientRect();return t&&new w(t.x,t.y,t.width,t.height)},m={t:"b",r:"l",b:"t",l:"r"},g={t:0,r:1,b:2,l:3},f=["top","right","bottom","left"],y=["t","r","b","l"],v=["width","height"],b=[0,0,0,0],N=/^([trblc])(\d*)(%|px)?-([trblc])(\d*)(%|px)?$/;class w extends DOMRect{static config={className:"Neo.util.Rectangle"};minHeight=null;minWidth=null;static excludes(e,t){return e.bottom<t.top||e.left>t.right||e.right<t.left||e.top>t.bottom}static getIntersection(e,t){let o=Math.max(e.x,t.x),i=Math.max(e.y,t.y),n=Math.min(e.right,t.right),r=Math.min(e.bottom,t.bottom),s=Math.max(0,n-o),a=Math.max(0,r-i);return a<1||s<1?null:new w(o,i,s,a)}static includes(e,t){return e.bottom>=t.bottom&&e.left<=t.left&&e.right>=t.right&&e.top<=t.top}static leavesSide(e,t,o){return!w.includes(e,t)&&("bottom"===o?e.bottom<t.bottom:"left"===o?e.left>t.left:"right"===o?e.right<t.right:"top"===o?e.top>t.top:void 0)}static moveBy(e,t=null,o=null){let i={...e};return Neo.isNumber(t)&&(i.left+=t,i.right+=t,i.x+=t),Neo.isNumber(o)&&(i.bottom+=o,i.top+=o,i.y+=o),i}static moveTo(e,t=null,o=null){let i={...e};return Neo.isNumber(t)&&(i.left=t,i.right=t+i.width,i.x=t),Neo.isNumber(o)&&(i.bottom=o+i.height,i.top=o,i.y=o),i}set bottom(e){this.height+=e-this.bottom}get bottom(){return super.bottom}set right(e){this.width+=e-this.right}get right(){return super.right}changeX(e){const t=this.x-e;this.x=e,this.width+=t}changeY(e){const t=this.y-e;this.y=e,this.height+=t}clone(){return w.clone(this)}static clone(e){const t=new w(e.x,e.y,e.width,e.height);return t.minWidth=e.minWidth,t.minHeight=e.minHeight,t}intersects(e){const t=this;if(e.height&&e.width){const o=Math.max(t.x,e.x),i=Math.max(t.y,e.y),n=Math.min(t.x+t.width,e.x+e.width),r=Math.min(t.y+t.height,e.y+e.height);return!(o>=n||i>=r)&&new w(o,i,n-o,r-i)}return e.x>=t.x&&e.y>=t.y&&e.right<=t.right&&e.bottom<=t.bottom}contains(e){return this.bottom>=e.bottom&&this.left<=e.left&&this.right>=e.right&&this.top<=e.top}expand(e){return e=h(e),new this.constructor(this.x-e[3],this.y-e[0],this.width+e[1]+e[3],this.height+e[0]+e[2])}moveBy(e=0,t=0){const o=this.clone();return Array.isArray(e)&&(t=e[1],e=e[0]),o.x+=e,o.y+=t,o}contains(e){return this.constructor.includes(this,e)}constrainTo(e){const t=this,o=t.minWidth||t.width;if((t.minHeight||t.height)>e.height||o>e.width)return!1;const i=t.clone();return i.x=Math.max(t.x+Math.min(e.right-i.right,0),e.x),i.y=Math.max(t.y+Math.min(e.bottom-i.bottom,0),e.y),i.bottom=Math.min(i.bottom,e.bottom),i.right=Math.min(i.right,e.right),i}alignTo(e){const t=this,{constrainTo:o,target:i,edgeAlign:n,axisLock:r,offset:s,matchSize:a}=e,d=e.targetMargin?h(e.targetMargin):b,l=u(i),p=u(o),w=(e=>{const t=N.exec(e),o=g[t[1]],i=g[t[4]];return{ourEdge:t[1],ourEdgeOffset:parseInt(t[2]||50),ourEdgeUnit:t[3]||"%",ourEdgeZone:o,theirEdge:t[4],theirEdgeOffset:parseInt(t[5]||50),theirEdgeUnit:t[6]||"%",theirEdgeZone:i,edgeAligned:(1&o)==(1&i)&&o!==i}})(n),C=v[1&w.theirEdgeZone];let A=t.clone();a&&(A[C]=l[C]);const S=A.getAnchorPoint(w.ourEdgeZone,w.ourEdgeOffset,w.ourEdgeUnit),I=l.getAnchorPoint(w.theirEdgeZone,w.theirEdgeOffset,w.theirEdgeUnit,d),x=[I[0]-S[0],I[1]-S[1]];if(A=A.moveBy(x),A.zone=w.theirEdgeZone,A.position=f[A.zone],p&&!p.contains(A)){if(l.intersects(A))return A;let e=w.theirEdgeZone;const o=[{zone:e,edgeAlign:n}];if(r)o[1]={zone:e=(e+2)%4,edgeAlign:c(w)},o.push({zone:e=(w.theirEdgeZone+1)%4,edgeAlign:`${m[y[e]]}-${y[e]}`}),o.push({zone:e=(w.theirEdgeZone+3)%4,edgeAlign:`${m[y[e]]}-${y[e]}`});else for(let t=1;t<4;t++)o.push({zone:e=(e+1)%4,edgeAlign:`${m[y[e]]}-${y[e]}`});for(let e=0;e<o.length;e++){const t=p.clone();switch(o[e].zone){case 0:t.bottom=l.y-d[0];break;case 1:t.changeX(l.right+d[1]);break;case 2:t.changeY(l.bottom+d[2]);break;case 3:t.right=l.x-d[3]}o[e].constrainRect=t}for(let e=0;e<o.length;e++){const{zone:i,edgeAlign:n,constrainRect:r}=o[e],s=y[i];a&&(A[C]=s===w.theirEdge||s==m[w.theirEdge]?l[C]:t[C]),A=A.alignTo({target:l,edgeAlign:n,targetMargin:d});let p=A.constrainTo(r);if(p)return p.zone=i,p.position=f[i],p}}return s&&A.moveBy(s),A}getAnchorPoint(e,t,o,i=p){const n=this;let r;switch(e){case 0:r=[n.x,n.y-(i[0]||0),n.width,0];break;case 1:r=[n.x+n.width+(i[1]||0),n.y,n.height,1];break;case 2:r=[n.x,n.y+n.height+(i[2]||0),n.width,0];break;case 3:r=[n.x-(i[3]||0),n.y,n.height,1]}return r[r[3]]+="%"===o?r[2]/100*t:t,r.length=2,r}equals(e){return e instanceof DOMRect&&e.x===this.x&&e.y===this.y&&e.height===this.height&&e.width===this.width}show(e="red"){const t=document.createElement("div");return t.style=`\n            position:absolute;\n            transform:translate3d(${this.x}px, ${this.y}px, 0);\n            height:${this.height}px;\n            width:${this.width}px;\n            background-color:${e}\n        `,document.body.appendChild(t),setTimeout((()=>t.remove()),3e4),t}toJSON(){const{bottom:e,height:t,left:o,minHeight:i,minWidth:n,right:r,top:s,width:a,x:d,y:l}=this;return{bottom:e,height:t,left:o,minHeight:i,minWidth:n,right:r,top:s,width:a,x:d,y:l}}}o(3394);var C=o(440),A=o(8825),S=o(9251);const I=e=>null==e||isNaN(e)?e:`${e}px`,x=Symbol.for("closestController"),V=Symbol.for("closestProvider"),{currentWorker:_}=Neo,D=/^\d+\w+$/,R=Symbol.for("twoWayBinding");class U extends i.A{static hideModes=["removeDom","visibility"];static observable=!0;static config={className:"Neo.component.Base",ntype:"component",align_:{edgeAlign:"t-b",constrainTo:"document.body"},appName_:null,autoMount:!1,autoRender:!1,baseCls:[],bind:null,cls_:null,containsFocus_:!1,controller_:null,data_:null,disabled_:!1,domListeners_:null,droppable_:!1,dropZone:null,dropZoneConfig:null,floating:!1,hasBeenMounted:!1,hasRenderingListener:!1,hasUnmountedVdomChanges_:!1,height_:null,hidden_:!1,hideMode_:"removeDom",html_:null,isLoading_:!1,isVdomUpdating_:!1,keys_:null,loadingSpinnerCls_:["fa","fa-spinner","fa-spin"],maxHeight_:null,maxWidth_:null,minHeight_:null,minWidth_:null,modelData:null,mounted_:!1,needsVdomUpdate_:!1,parentComponent_:null,parentId_:"document.body",plugins_:null,reference_:null,responsive_:null,rendering_:!1,role_:null,scrollable_:!1,silentVdomUpdate_:!1,stateProvider_:null,style_:null,theme_:null,tag_:null,tooltip_:null,ui_:null,updateDepth_:1,vnode_:null,width_:null,windowId_:null,wrapperCls_:null,wrapperStyle_:null,_vdom:{}};childUpdateCache={};currentUpdateDepth=null;resolveUpdateCache=[];get app(){return Neo.apps[this.appName]||null}get isVisible(){return this.mounted&&!this.hidden&&(!this.parent||this.parent.isVisible)}get listeners(){return this._listeners||{}}set listeners(e){this._listeners=e}get parent(){let e=this;return e.parentComponent||("document.body"===e.parentId?null:Neo.getComponent(e.parentId))}get rendered(){return this._rendered||!1}set rendered(e){let t=this;t._rendered=e,!0===e&&t.fire("rendered",t.id)}get vdom(){return this._vdom}set vdom(e){this.afterSetVdom(e,e)}addCls(e){let{cls:t}=this;a.A.add(t,e),this.cls=t}addDomListeners(e){Array.isArray(e)||(e=[e]);let t=this.domListeners;t.push(...e),this.domListeners=t}addStyle(e){return"string"==typeof e&&(e=C.A.createStyleObject(e)),this.style=Object.assign(this.style,e)}addWrapperCls(e){let{wrapperCls:t}=this;a.A.add(t,e),this.wrapperCls=t}afterSetAppName(e,t){}afterSetCls(e,t){t=t||[];let o,i=this,n=i.vdom,r=i.getVdomRoot();n!==r?r.cls=[...e]:(o=a.A.union(i.wrapperCls,e),a.A.remove(o,a.A.difference(t,e)),n.cls=o),i.update()}afterSetConfig(e,t,o){let i=this;if(_.isUsingStateProviders&&i[R]&&void 0!==o){let o=i.bind?.[e];o?.twoWay&&this.getStateProvider()?.setData(o.key,t)}}afterSetDisabled(e,t){let o=this.cls;a.A[e?"add":"remove"](o,"neo-disabled"),this.cls=o}afterSetDomListeners(e,t){(e?.[0]||t?.[0])&&s.A.updateDomListeners(this,e,t)}afterSetDroppable(e,t){let i=this;e&&!i.dropZone&&o.e(113).then(o.bind(o,9113)).then((e=>{i.dropZone=Neo.create({module:e.default,appName:i.appName,owner:i,windowId:i.windowId,...i.dropZoneConfig})}))}afterSetFlex(e,t){isNaN(e)||(e=`${e} ${e} 0%`),this.configuredFlex=e,this.changeVdomRootKey("flex",e)}afterSetHasUnmountedVdomChanges(e,t){if(e||!e&&t){let t,o=r.A.getParentIds(this),i=0,n=o.length;for(;i<n;i++)t=Neo.getComponent(o[i]),t&&(t._hasUnmountedVdomChanges=e)}}afterSetHeight(e,t){this.configuredHeight=I(e),this.changeVdomRootKey("height",e)}afterSetHidden(e,t){let o=this,i=e?"hide":"show";e&&void 0===t&&"removeDom"===o.hideMode?o.vdom.removeDom=!0:(e||void 0!==t)&&o[i](),e||o.revertFocus(),o.fire(i,{id:o.id}),o.fire("hiddenChange",{id:o.id,oldValue:t,value:e})}afterSetHtml(e,t){this.changeVdomRootKey("html",e)}afterSetId(e,t){super.afterSetId(e,t),this.changeVdomRootKey("id",e),t&&r.A.unregister(t),e&&r.A.register(this)}afterSetIsLoading(e,t){if(e||void 0!==t){let o,i=this,{wrapperCls:n,vdom:r}=i;void 0!==t&&r.cn&&(o=r.cn.findLastIndex((e=>e.cls?.includes("neo-load-mask"))),-1!==o&&r.cn.splice(o,1)),e&&(r.cn||(r.cn=[]),r.cn.push(i.createLoadingMask(e))),a.A.toggle(n,"neo-masked",e),i.set({vdom:r,wrapperCls:n})}}afterSetIsVdomUpdating(e,t){this.currentUpdateDepth=e?this.updateDepth:null}afterSetMaxHeight(e,t){this.configuredMaxHeight=I(e),this.changeVdomRootKey("maxHeight",e)}afterSetMaxWidth(e,t){this.configuredMaxWidth=I(e),this.changeVdomRootKey("maxWidth",e)}afterSetMinHeight(e,t){this.configuredMinHeight=I(e),this.changeVdomRootKey("minHeight",e)}afterSetMinWidth(e,t){this.configuredMinWidth=I(e),this.changeVdomRootKey("minWidth",e)}afterSetMounted(e,t){if(void 0!==t){let t=this,{id:o,windowId:i}=t;e?(t.hasBeenMounted=!0,t.domListeners?.length>0&&t.timeout(150).then((()=>{s.A.mountDomListeners(t)})),t.doResolveUpdateCache(),t.floating&&(t.alignTo(),t.focus(o,!0)),t.fire("mounted",t.id)):t.revertFocus()}}afterSetReference(e,t){e&&this.changeVdomRootKey("data-ref",e)}async afterSetResponsive(e,t){if(e&&!this.getPlugin("responsive")){let t=this,i=await o.e(514).then(o.bind(o,8514)),n=t.plugins||[];n.push({module:i.default,appName:t.appName,value:e}),t.plugins=n}}afterSetRole(e,t){this.changeVdomRootKey("role",e)}afterSetScrollable(e,t){if(void 0===t&&!e)return;let o=this;if(t){let e="overflow";Neo.isBoolean(t)||(e+=Neo.capitalize(t)),o.removeStyle([e])}if(!Neo.isEmpty(e)){let t="overflow";e&&!Neo.isBoolean(e)&&(t+=Neo.capitalize(e)),e?(o.addStyle(t+":auto"),o.addCls("neo-scrollable")):o.removeCls("neo-scrollable")}}afterSetStyle(e,t){(e||void 0!==t)&&this.updateStyle()}afterSetTag(e,t){e&&this.changeVdomRootKey("tag",e)}afterSetTheme(e,t){if(e||void 0!==t){let o=this,{cls:i}=o,n=!1;t&&i.includes(t)&&(a.A.remove(i,t),n=!0),e!==o.parent?.theme&&(e&&a.A.add(i,e),n=!0),n&&(o.cls=i)}}afterSetTooltip(e,t){t?.destroy?.(),e&&(Neo.ns("Neo.tooltip.Base")?this.createTooltip(e):o.e(91).then(o.bind(o,6091)).then((()=>{this.createTooltip(e)})))}afterSetUi(e,t){let o=this,i=o.cls;t&&a.A.remove(i,`neo-${o.ntype}-${t}`),e&&""!==e&&a.A.add(i,`neo-${o.ntype}-${e}`),o.cls=i}afterSetVdom(e,t){this.updateVdom()}afterSetVnode(e,t){void 0!==t&&this.syncVnodeTree()}afterSetWidth(e,t){this.configuredWidth=I(e),this.changeVdomRootKey("width",e)}afterSetWindowId(e,t){let o=this,i=o.controller;e&&(_.insertThemeFiles(e,o.__proto__),i&&(i.windowId=e)),t&&(o.isVdomUpdating=!1)}afterSetWrapperCls(e,t){t=t||[],e=e||[];let o=this,{vdom:i}=o,n=o.getVdomRoot(),r=i.cls||[];i===n?(r=a.A.union(r,e),a.A.remove(r,a.A.difference(t,e)),i.cls=r):(e=e||[],t&&a.A.remove(r,t),a.A.add(r,e),i.cls=r),o.update()}afterSetWrapperStyle(e,t){(e||void 0!==t)&&this.updateStyle()}async alignTo(e={}){const t=this,o={...t.align,...e,id:t.id,configuredFlex:t.configuredFlex,configuredWidth:t.configuredWidth,configuredHeight:t.configuredHeight,configuredMinWidth:t.configuredMinWidth,configuredMinHeight:t.configuredMinHeight,configuredMaxWidth:t.configuredMaxWidth,configuredMaxHeight:t.configuredMaxHeight};o.target&&await Neo.main.DomAccess.align(o)}beforeGetCls(e){return e?[...e]:[]}beforeGetData(e){return this.getStateProvider().getHierarchyData()}beforeGetStyle(e){return{...e}}beforeGetWrapperCls(e){return e?[...e]:[]}beforeGetWrapperStyle(e){return{...Object.assign(this.vdom.style||{},e)}}beforeSetAlign(e,t){return"string"==typeof e&&(e={edgeAlign:e}),Neo.merge({},e,this.constructor.config.align)}beforeSetCls(e,t){return a.A.union(e||[],this.baseCls,this.getBaseClass())}beforeSetController(e,t){return t?.destroy(),e?n.A.beforeSetInstance(e,"Neo.controller.Component",{component:this,windowId:this.windowId}):e}beforeSetDomListeners(e,t){return Neo.isObject(e)&&(e=[e]),e||[]}beforeSetHideMode(e,t){return this.beforeSetEnumValue(e,t,"hideMode")}beforeSetKeys(e,t){return t?.destroy(),e&&(e=n.A.beforeSetInstance(e,l,{keyDownEventBubble:!0,keys:e})),e}beforeSetPlugins(e,t){return Array.isArray(e)&&e.forEach(((t,o)=>{e[o]=n.A.beforeSetInstance(t,null,{owner:this})})),e}beforeSetSilentVdomUpdate(e,t){return!0===e?Neo.isNumber(t)?t+1:1:Neo.isNumber(t)&&t>0?t-1:0}beforeSetStateProvider(e,t){if(t?.destroy(),e){let t=this,o={component:t};return t.modelData&&(o.data=t.modelData),n.A.beforeSetInstance(e,"Neo.state.Provider",o)}return null}beforeSetUpdateDepth(e,t){return void 0===t?e:-1===t||-1===e?-1:Math.max(e,t)}changeVdomRootKey(e,t){let o=this.getVdomRoot();t?o[e]=t:delete o[e],this.update()}createLoadingMask(e){return{cls:["neo-load-mask"],cn:[{cls:["neo-load-mask-body"],cn:[{cls:this.loadingSpinnerCls},{cls:["neo-loading-message"],html:e,removeDom:!Neo.isString(e)}]}]}}createTooltip(e){"string"==typeof e&&(e={text:e});let t=this;e.ownInstance?t._tooltip=Neo.create("Neo.tooltip.Base",{...e,appName:t.appName,componentId:t.id,windowId:t.windowId}):(t._tooltip=e,Neo.tooltip.Base.createSingleton(t.app),t.addCls("neo-uses-shared-tooltip"),t.update())}createVdomReference(){let e=this,t={componentId:e.id},o=e.vdom.id;return o&&e.id!==o&&(t.id=o),t}destroy(e=!1,t=!1){let o,i=this,{parent:n,parentId:s}=i,a=n?.getStateProvider();i.revertFocus(),i.domListeners=[],i.controller=null,i.reference&&i.getController()?.removeReference(i),i.stateProvider=null,i.bind&&a?.removeBindings(i.id),i.plugins?.forEach((e=>{e.destroy()})),e&&s&&("document.body"===s?Neo.applyDeltas(i.appName,{action:"removeNode",id:i.vdom.id}):(o=n.vdom,A.A.removeVdomChild(o,i.vdom.id),n[t?"_vdom":"vdom"]=o)),r.A.unregister(i),super.destroy(),i.onFocusLeave=Neo.emptyFn,i.unmount=Neo.emptyFn}doResolveUpdateCache(){let e=this;e.resolveUpdateCache&&(e.resolveUpdateCache.forEach((e=>e())),e.resolveUpdateCache=[])}down(e,t=!0){return r.A.down(this,e,t)}#e(e,t){let o,i=this,{vdom:n,vnode:s}=i,a={};_.isSharedWorker&&(a.appName=i.appName,a.windowId=i.windowId),i.isVdomUpdating=!0,i._needsVdomUpdate=!1,i.afterSetNeedsVdomUpdate?.(!1,!0),a.vdom=r.A.getVdomTree(n,i.updateDepth),a.vnode=r.A.getVnodeTree(s,i.updateDepth),i._updateDepth=i.constructor.config.updateDepth,Neo.vdom.Helper.update(a).catch((e=>{i.isVdomUpdating=!1,t?.()})).then((t=>{i.id&&(i.vnode=t.vnode,i.isVdomUpdating=!1,o=t.deltas,!Neo.config.useVdomWorker&&o.length>0?Neo.applyDeltas(i.appName,o).then((()=>{i.resolveVdomUpdate(e)})):i.resolveVdomUpdate(e))}))}focus(e=this.id,t=!1){Neo.main.DomAccess.focus({children:t,id:e,windowId:this.windowId})}getBaseClass(){const e=[];return this.floating&&e.push("neo-floating"),e}getConfigInstanceByNtype(e,t){let o=this,i=o[e],{parentComponent:n}=o;return!i||t&&t!==i.ntype?(!n&&o.parentId&&(n=o.parent||Neo.get(o.parentId)),n?n.getConfigInstanceByNtype(e,t):null):i}getController(e){let t,o=this;return!e&&(t=o[x],t)||(t=o.getConfigInstanceByNtype("controller",e),e||(o[x]=t)),t}async getDomRect(e=this.id,t=this.appName){let o=await Neo.main.DomAccess.getBoundingClientRect({appName:t,id:e,windowId:this.windowId});return Array.isArray(o)?o.map((e=>w.clone(e))):w.clone(o)}getMountedParentId(){let e=this.parentId,t=Neo.getComponent(e),o=t?.getVdomItemsRoot?.();return o?o.id:e}getMountedParentIndex(){let e,t=this.parent,o=t?.items||[],i=0,n=0,r=o.length;for(;i<r;i++){if(e=o[i],e===this)return n;e.hidden||"removeDom"!==e.hideMode||n++}}getParents(){return r.A.getParents(this)}getPlugin(e){Neo.isString(e)&&(e.startsWith("plugin-")||(e="plugin-"+e),e={ntype:e});let t,o=this;for(const i of o.plugins||[]){t=!0;for(const o in e)if(i[o]!==e[o]){t=!1;break}if(t)return i}return null}getReference(e){return this.down({reference:e})}getState(...e){return this.getStateProvider().getData(...e)}getStateProvider(e){if(!_.isUsingStateProviders)return null;let t,o=this;return!e&&(t=o[V],t)||(t=o.getConfigInstanceByNtype("stateProvider",e),e||(o[V]=t)),t}getTheme(){let e,t,o=this,i="neo-theme-";for(const e of o.cls||[])if(e.startsWith(i))return e;if(e=o.app?.mainView,e){t=A.A.getParentNodes(e.vdom,o.id);for(const e of t||[])for(const t of e.cls||[])if(t.startsWith(i))return t}return Neo.config.themes?.[0]}getVdomChild(e,t=this.vdom){return A.A.find(t,e)?.vdom}getVdomRoot(){return this.vdom}getVnodeRoot(){return this.vnode}hasUpdateCollision(e,t){return-1===e||t<e}hide(e){let t=this;if("visibility"!==t.hideMode){let o=function(){"document.body"!==t.parentId?(t.vdom.removeDom=!0,t.parent.updateDepth=2,t.parent.update()):t.unmount()};e?t.timeout(e).then(o):o()}else{let e=t.style;e.visibility="hidden",t.style=e}t._hidden=!0}init(){this.autoRender&&this.render()}initConfig(e,t){super.initConfig(e,t),this.getStateProvider()?.parseConfig(this)}isFloating(){let e=this;return!!e.floating||!!e.parent&&e.parent.floating}isParentUpdating(e=this.parentId,t,o=1){if("document.body"!==e){let i=this,n=Neo.getComponent(e);if(n)return n.isVdomUpdating?!!i.hasUpdateCollision(n.currentUpdateDepth,o)&&(Neo.config.logVdomUpdateCollisions&&console.warn("vdom parent update conflict with:",n,"for:",i),n.childUpdateCache[i.id]={distance:o,resolve:t},t&&i.resolveUpdateCache.push(t),!0):i.isParentUpdating(n.parentId,t,o+1)}return!1}async measure(e){if(null!=e)if(e.endsWith("px"))e=parseFloat(e);else if(D.test(e)){let{id:t,windowId:o}=this;e=await Neo.main.DomAccess.measure({id:t,value:e,windowId:o})}else isNaN(e)||(e=parseFloat(e));return e}mergeConfig(...e){let t=this,o=super.mergeConfig(...e),i={...t._vdom||{},...o.vdom||{}};return t._vdom=Neo.clone(i,!0,!0),o.style&&(t.style="Object"===Neo.typeOf(o.style)?{...o.style,...t.constructor.config.style}:o.style),t.wrapperStyle=Neo.clone(o.wrapperStyle,!1),delete o.style,delete o._vdom,delete o.vdom,delete o.wrapperStyle,o}async mount(){let e,t,o=this;if(!o.vnode)throw new Error("Component vnode must be generated before mounting, use Component.render()");o.hasUnmountedVdomChanges?(o.hasUnmountedVdomChanges=!1,t=r.A.getChildIds(o.vnode),t.forEach((t=>{e=Neo.getComponent(t),e&&(e._hasUnmountedVdomChanges=!1)})),o.render(!0)):(await _.promiseMessage("main",{action:"mountDom",appName:o.appName,id:o.id,html:o.vnode.outerHTML,parentId:o.getMountedParentId(),parentIndex:o.getMountedParentIndex()}),delete o.vdom.removeDom,await o.timeout(30),o.mounted=!0)}needsParentUpdate(e=this.parentId,t,o=1){if("document.body"!==e){let i=this,n=Neo.getComponent(e);if(n)return n.needsVdomUpdate&&i.hasUpdateCollision(n.updateDepth,o)?(n.resolveUpdateCache.push(...i.resolveUpdateCache),t&&n.resolveUpdateCache.push(t),i.resolveUpdateCache=[],!0):i.needsParentUpdate(n.parentId,t,o+1)}return!1}onConstructed(){super.onConstructed(),this.keys?.register(this)}onFocusEnter(e){this.focusEnterData=e}onFocusLeave(e){this.focusEnterData=null}onRender(e,t){let o=this,{app:i}=o;if(o.rendering=!1,i){i.rendered||(i.rendering=!1,i.rendered=!0,i.fire("render")),o.vnode=e;let n,s=r.A.getChildIds(e),a=0,d=s.length;for(;a<d;a++)n=Neo.getComponent(s[a]),n&&(n.rendered=!0);o._rendered=!0,o.fire("rendered",o.id),t&&(o.mounted=!0,i.mounted||(i.mounted=!0,i.fire("mounted")))}}promiseUpdate(){return new Promise(((e,t)=>{this.updateVdom(e,t)}))}removeCls(e){let t=this.cls;a.A.remove(t,e),this.cls=t}removeDomListeners(e){Array.isArray(e)||(e=[e]);let t,o,{domListeners:i}=this;e.forEach((e=>{for(t=0,o=i.length;t<o;t++)if(Neo.isEqual(e,i[t])){i.splice(t,1);break}})),this.domListeners=i}removeStyle(e){Array.isArray(e)||(e=[e]);let{style:t}=this,o=!1;return Object.keys(t).forEach((i=>{e.indexOf(i)>-1&&(delete t[i],o=!0)})),o&&(this.style=t),t}async render(e){let t=this,o=e||t.autoMount,{app:i}=t,{useVdomWorker:n}=Neo.config;if(o&&0!==_.countLoadingThemeFiles)_.on("themeFilesLoaded",(function(){!t.mounted&&t.render(e)}),t,{once:!0});else if(t.rendering=!0,i.rendered||(i.rendering=!0),t.vdom){t.isVdomUpdating=!0,delete t.vdom.removeDom,t._needsVdomUpdate=!1,t.afterSetNeedsVdomUpdate?.(!1,!0);const e=await Neo.vdom.Helper.create({appName:t.appName,autoMount:o,parentId:o?t.getMountedParentId():void 0,parentIndex:o?t.getMountedParentIndex():void 0,windowId:t.windowId,...r.A.getVdomTree(t.vdom)});t.onRender(e,!!n&&o),t.isVdomUpdating=!1,o&&!n&&t.mount(),t.resolveVdomUpdate()}}resolveVdomUpdate(e){let t,o=this,i=!Neo.isEmpty(o.childUpdateCache);o.doResolveUpdateCache(),e?.(),o.needsVdomUpdate?(i&&(Object.entries(o.childUpdateCache).forEach((([e,i])=>{t=Neo.getComponent(e),t&&(i.resolve&&a.A.add(o.resolveUpdateCache,i.resolve),-1!==o.updateDepth&&(-1===t.updateDepth?o.updateDepth=-1:o.updateDepth=o.updateDepth+i.distance+t.updateDepth-1))})),o.childUpdateCache={}),o.update()):i&&(Object.keys(o.childUpdateCache).forEach((e=>{Neo.getComponent(e)?.update()})),o.childUpdateCache={})}revertFocus(){let e=this.focusEnterData?.relatedTarget;this.containsFocus&&e&&Neo.getComponent(e.id)?.focus()}set(e={},t=!1){let o=this,i=!1===e.hidden&&e.hidden!==o.hidden;return o.silentVdomUpdate=!0,super.set(e),o.silentVdomUpdate=!1,t||!o.needsVdomUpdate?Promise.resolve():i?(o.show(),Promise.resolve()):o.promiseUpdate()}setSilent(e={}){return this.set(e,!0)}setState(...e){this.getStateProvider().setData(...e)}show(){let e=this;if("visibility"!==e.hideMode)delete e.vdom.removeDom,e.silentVdomUpdate?e.needsVdomUpdate=!0:"document.body"!==e.parentId?(e.parent.updateDepth=2,e.parent.update()):!e.mounted&&e.render(!0);else{let t=e.style;delete t.visibility,e.style=t}e._hidden=!1}syncVdomIds(e=this.vnode,t=this.vdom,o=!1){A.A.syncVdomIds(e,t,o)}syncVnodeTree(e=this.vnode){let t,o=this,i=r.A.getChildren(o),n={};o.syncVdomIds(),e&&o.id!==e.id&&r.A.registerWrapperNode(e.id,o),i.forEach((e=>{t=S.A.find(o.vnode,e.vdom.id)?.vnode,t&&(n[e.id]=t,e.id!==t.id&&r.A.registerWrapperNode(t.id,e))})),i.forEach((e=>{t=n[e.id],t?(e._vnode=r.A.addVnodeComponentReferences(t,e.id),e.rendered||(e._rendered=!0,e.fire("rendered",e.id)),e.mounted=!0):console.warn("syncVnodeTree: Could not replace the child vnode for",e.id)})),o._vnode=e?r.A.addVnodeComponentReferences(e,o.id):null}toggleCls(e,t){let o=this.cls;a.A.toggle(o,e,t),this.cls=o}unmount(){let e=this;e.vdom.removeDom=!0,e._hidden=!0,e.mounted=!1,Neo.applyDeltas(e.appName,{action:"removeNode",id:e.vdom.id})}up(e){return r.A.up(this.id,e)}update(){this.afterSetVdom(this.vdom,null)}updateStyle(){let e=this,{vdom:t}=e,o=e.getVdomRoot();t!==o?(t.style=e.wrapperStyle,o.style=e.style):t.style={...e.wrapperStyle,...e.style},e.update()}updateVdom(e,t){let o=this,{app:i,mounted:n,parentId:r,vnode:s}=o;o.isVdomUpdating||o.silentVdomUpdate?(e&&o.resolveUpdateCache.push(e),o.needsVdomUpdate=!0):n||!o.isConstructed||o.hasRenderingListener||!0!==i?.rendering?(!e||n&&s||o.resolveUpdateCache.push(e),!o.needsParentUpdate(r,e)&&!o.isParentUpdating(r,e)&&n&&s&&(0!==_.countLoadingThemeFiles?_.on("themeFilesLoaded",(function(){o.updateVdom(e,t)}),o,{once:!0}):o.#e(e,t))):(o.hasRenderingListener=!0,i.on("mounted",(()=>{o.timeout(50).then((()=>{o.vnode&&o.updateVdom(e,t)}))}),o,{once:!0})),o.hasUnmountedVdomChanges=!n&&o.hasBeenMounted}async waitForDomRect({appName:e=this.appName,attempts:t=10,delay:o=50,id:i=this.id}){let n=this,r=await n.getDomRect(i,e),s=!1;return Array.isArray(r)?r.forEach((e=>{(e.height<1||e.width<1)&&(s=!0)})):(r.height<1||r.width<1)&&(s=!0),s&&t>0?(await n.timeout(o),await n.waitForDomRect({appName:e,attempts:t-1,delay:o,id:i})):r}}const k=Neo.setupClass(U)},2480:(e,t,o)=>{o.d(t,{A:()=>s});var i=o(2004),n=o(6846);class r extends i.A{static badgePositions=["bottom-left","bottom-right","top-left","top-right"];static iconPositions=["top","right","bottom","left"];static config={className:"Neo.button.Base",ntype:"button",badgePosition_:"top-right",badgeText_:null,baseCls:["neo-button"],editRoute:!0,handler_:null,handlerScope:null,iconCls_:null,iconColor_:null,iconPosition_:"left",menu_:null,pressed_:!1,route_:null,text_:null,url_:null,urlTarget_:"_blank",useRippleEffect_:!0,_vdom:{tag:"button",type:"button",cn:[{tag:"span",cls:["neo-button-glyph"]},{tag:"span",cls:["neo-button-text"]},{cls:["neo-button-badge"]},{cls:["neo-button-ripple-wrapper"],cn:[{cls:["neo-button-ripple"]}]}]}};get badgeNode(){return this.getVdomRoot().cn[2]}get iconNode(){return this.getVdomRoot().cn[0]}rippleEffectDuration=400;#t=null;get rippleWrapper(){return this.getVdomRoot().cn[3]}get textNode(){return this.getVdomRoot().cn[1]}construct(e){super.construct(e);let t=this;t.addDomListeners({click:t.onClick,scope:t})}afterSetId(e,t){super.afterSetId(e,t),this.textNode.id=e+"__text"}afterSetBadgePosition(e,t){let{badgeNode:o}=this,i=o.cls||[];n.A.remove(i,"neo-"+t),n.A.add(i,"neo-"+e),o.cls=i,this.update()}afterSetBadgeText(e,t){let{badgeNode:o}=this;o.html=e,o.removeDom=!Boolean(e),this.update()}afterSetIconCls(e,t){let{iconNode:o}=this;n.A.remove(o.cls,t),n.A.add(o.cls,e),o.removeDom=!e||""===e,this.update()}afterSetIconColor(e,t){let{iconNode:o}=this;o.style||(o.style={}),""===e&&(e=null),o.style.color=e,this.update()}afterSetIconPosition(e,t){let o=this.cls;n.A.remove(o,"icon-"+t),n.A.add(o,"icon-"+e),this.cls=o}afterSetMenu(e,t){e&&Promise.all([o.e(220),o.e(906)]).then(o.bind(o,9906)).then((t=>{let o=this,i=Array.isArray(e),n=i?e:e.items,r=i?{}:e,s=o.getStateProvider(),{appName:a,theme:d,windowId:l}=o,p=Neo.merge({module:t.default,align:{edgeAlign:"t0-b0",target:o.id},appName:a,displayField:"text",floating:!0,hidden:!0,parentComponent:o,theme:d,windowId:l},r);n&&(p.items=n),s&&(p.stateProvider={parent:s}),o.menuList=Neo.create(p)}))}afterSetPressed(e,t){let o=this.cls;n.A.toggle(o,"pressed",!0===e),this.cls=o}afterSetRoute(e,t){!this.editRoute&&this.updateTag()}afterSetTheme(e,t){super.afterSetTheme(e,t);let{menuList:o}=this;o&&(o.theme=e)}afterSetText(e,t){let o=this,i=!e||""===e,r=o.getVdomRoot(),{textNode:s}=o;n.A.toggle(o._cls,"no-text",i),n.A.toggle(r.cls,"no-text",i),s.removeDom=i,i||(s.innerHTML=e),o.update()}afterSetUrl(e,t){this.updateTag()}afterSetUseRippleEffect(e,t){this.rippleWrapper.removeDom=!0,this.update()}afterSetUrlTarget(e,t){let o=this,i=o.getVdomRoot();o.url?i.target=e:delete i.target,o.update()}afterSetWindowId(e,t){super.afterSetWindowId(e,t);let{menuList:o}=this;o&&(o.windowId=e)}beforeGetIconCls(){let e=this._iconCls;return Array.isArray(e)?e.join(" "):e}beforeSetBadgePosition(e,t){return this.beforeSetEnumValue(e,t,"badgePosition")}beforeSetIconCls(e,t){return e&&!Array.isArray(e)&&(e=e.split(" ").filter(Boolean)),e}beforeSetIconPosition(e,t){return this.beforeSetEnumValue(e,t,"iconPosition")}changeRoute(){this.editRoute&&Neo.Main.editRoute(this.route)}destroy(...e){this.menuList?.destroy(!0,!1),super.destroy(...e)}onClick(e){let t=this;t.bindCallback(t.handler,"handler",t.handlerScope||t),t.handler?.(e),t.menu&&t.toggleMenu(),t.route&&t.changeRoute(),t.useRippleEffect&&t.showRipple(e)}async showRipple(e){let t,o=this,i=e.path[0].rect,n=Math.max(i.height,i.width),r=n/2,s=o.rippleEffectDuration,{rippleWrapper:a}=o,d=a.cn[0];d.style=Object.assign(d.style||{},{animation:"none",height:`${n}px`,left:e.clientX-i.left-r+"px",top:e.clientY-i.top-r+"px",width:`${n}px`}),delete a.removeDom,o.update(),await o.timeout(1),d.style.animation=`ripple ${s}ms linear`,o.update(),o.#t=t=setTimeout((()=>{o.#t===t&&(o.#t=null,a.removeDom=!0,o.update())}),s)}async toggleMenu(){let{menuList:e}=this,t=!e.hidden;e.hidden=t,t||await this.timeout(50)}updateTag(){let e=this,{editRoute:t,route:o,url:i}=e,n=!t&&o||i,r=e.getVdomRoot();t||!1!==o?.startsWith("#")||(n="#"+n),n?(r.href=n,r.tag="a"):(delete r.href,r.tag="button"),e.update()}}const s=Neo.setupClass(r)},3394:(e,t,o)=>{o.d(t,{A:()=>r});var i=o(3607);class n extends i.A{static config={className:"Neo.util.Style"};static compareStyles(e,t){let o={};return Neo.isString(e)&&(e=Neo.createStyleObject(e)),Neo.isString(t)&&(t=Neo.createStyleObject(t)),e||t?t?e?(Object.keys(e).forEach((i=>{t.hasOwnProperty(i)&&t[i]===e[i]||(o[i]=e[i])})),Object.keys(t).forEach((t=>{e.hasOwnProperty(t)||(o[t]=null)})),Object.keys(o).length>0?o:null):void Object.keys(t).forEach((function(e){o[e]=null})):Neo.clone(e):null}}const r=Neo.setupClass(n)},5022:(e,t,o)=>{o.d(t,{A:()=>r});var i=o(2004);class n extends i.A{static config={className:"Neo.component.Label",ntype:"label",baseCls:["neo-label"],text_:"",_vdom:{tag:"label",draggable:!1}};afterSetText(e,t){this.vdom.html=e,this.update()}}const r=Neo.setupClass(n)},5643:(e,t,o)=>{o.d(t,{A:()=>a}),o(2480);var i=o(2004),n=o(9970),r=(o(5022),o(6846));class s extends n.A{static dockPositions=["top","right","bottom","left",null];static config={className:"Neo.toolbar.Base",ntype:"toolbar",baseCls:["neo-toolbar"],dock_:null,itemDefaults:{ntype:"button"},layout:{ntype:"flexbox",align:"center",direction:"row",pack:"start"},sortable_:!1,sortZone:null,sortZoneConfig:null};afterSetAppName(e,t){super.afterSetAppName(e,t),this.sortZone&&(this.sortZone.appName=e)}afterSetDock(e,t){if(!e&&!t)return;let o=this,{cls:i}=o,n=o.getStaticConfig("dockPositions"),s=o.getLayoutConfig();n.forEach((t=>{null!==t&&r.A.toggle(i,"neo-dock-"+t,t===e)})),o.layout?(o.layout.set(s),o.cls=i):(s.ntype="flexbox",o.set({cls:i,layout:s}))}afterSetSortable(e,t){let i=this;e&&!i.sortZone&&o.e(556).then(o.bind(o,3175)).then((e=>{i.sortZone=Neo.create({module:e.default,appName:i.appName,boundaryContainerId:i.id,owner:i,windowId:i.windowId,...i.sortZoneConfig})}))}afterSetWindowId(e,t){super.afterSetWindowId(e,t),this.sortZone&&(this.sortZone.windowId=e)}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){let e=this._items;return Array.isArray(e)&&(this._items=e.map((e=>this.replaceSpacer(e)))),super.createItems()}getLayoutConfig(){let e,t=this;if(t.dock)switch(t.dock){case"bottom":case"top":e={align:"center",direction:"row",pack:"start"};break;case"left":e={align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={align:"center",direction:"column",pack:"start"}}return e||t.layout}insert(e,t,o=!1){return t=Array.isArray(t)?t.map((e=>this.replaceSpacer(e))):this.replaceSpacer(t),super.insert(e,t,o)}replaceSpacer(e){return"->"===e?{module:i.A,flex:1}:e}}const a=Neo.setupClass(s)},9970:(e,t,o)=>{o.d(t,{A:()=>h});var i=o(2004),n=o(3607),r=o(6846);class s extends n.A{static config={className:"Neo.layout.Base",ntype:"layout-base",appName_:null,containerId:null,containerCls_:null,isLayout:!0,windowId_:null};get container(){let{containerId:e}=this;return Neo.getComponent(e)||Neo.get(e)}afterSetWindowId(e,t){e&&Neo.currentWorker.insertThemeFiles(e,this.__proto__)}applyChildAttributes(e,t){}applyRenderAttributes(e=!1){let t=this,{container:o,containerCls:i}=t,{wrapperCls:n}=o;i&&(o||Neo.logError(t.className+": applyRenderAttributes -> container not yet created",t.containerId),r.A.add(n,i),o[e?"setSilent":"set"]({wrapperCls:n}))}destroy(){let e=this;e.bind&&e.getStateProvider()?.removeBindings(e.id),super.destroy()}getStateProvider(e){return this.container.getStateProvider(e)}initConfig(e,t){super.initConfig(e,t);let o=this;o.bind&&o.container.getStateProvider()?.parseConfig(o)}removeChildAttributes(e,t){}removeRenderAttributes(){let e=this,{container:t,containerCls:o}=e,{wrapperCls:i}=t;o&&(t||Neo.logError(e.className+": removeRenderAttributes -> container not yet created",e.containerId),r.A.remove(i,o),t.wrapperCls=i)}set(e={},t=!1){let{container:o}=this;return o.silentVdomUpdate=!0,super.set(e),o.silentVdomUpdate=!1,t||!o.needsVdomUpdate?Promise.resolve():o.promiseUpdate()}setSilent(e={}){return this.set(e,!0)}}const a=Neo.setupClass(s);Neo.setupClass(class extends a{static activeItemCls="neo-active-item";static inactiveItemCls="neo-inactive-item";static itemCls="neo-layout-card-item";static slideDirections=["horizontal","vertical",null];static config={className:"Neo.layout.Card",ntype:"layout-card",activeIndex_:0,containerCls:"neo-layout-card",removeInactiveCards:!0,slideDirection_:null};async afterSetActiveIndex(e,t){let o,i,n,s,a,d,l,p=this,{container:h,removeInactiveCards:c}=p,u=p.constructor,m=p.slideDirection&&void 0!==t,g=!1;if(Neo.isNumber(e)&&h){for(s=h.items,a=s.length,s[e]||Neo.error("Trying to activate a non existing card",e,s),o=0;o<a;o++)if(d=s[o].module,o===e&&"Function"===Neo.typeOf(d)){g=!0;break}for(o=0;o<a;o++)i=o===e,n=s[o],d=n.module,i&&"Function"===Neo.typeOf(d)&&(n=await p.loadModule(n,o)),n instanceof Neo.component.Base&&(l=n.wrapperCls,r.A.remove(l,i?u.inactiveItemCls:u.activeItemCls),r.A.add(l,i?u.activeItemCls:u.inactiveItemCls),(c||g)&&(i?(delete n.vdom.removeDom,!m&&n.activate?.()):c&&(n.mounted=!1,n.vdom.removeDom=!0)),n.wrapperCls=l);m?await p.slideCards(e,t):(c||g)&&(h.updateDepth=-1,h.update())}}applyChildAttributes(e,t,o=!1){let i=this,n=i.activeIndex===t,s=i.constructor,a=e.wrapperCls||[],{vdom:d}=e;r.A.add(a,s.itemCls),r.A.add(a,n?s.activeItemCls:s.inactiveItemCls),!o&&i.removeInactiveCards?(d.removeDom=!n,e.wrapperCls=a,e.update?.()):e.wrapperCls=a}beforeSetSlideDirection(e,t){return this.beforeSetEnumValue(e,t,"slideDirection")}async loadModule(e,t){let o,{container:i}=this,n=i.items,{module:r}=e;return Neo.isNumber(t)||(t=n.indexOf(e)),e.isLoading=!0,r=await r(),r=r.default,o=r.prototype,e.className=o.className,e.module=r,delete e.isLoading,delete e.vdom,n[t]=e=Neo.create(e),this.applyChildAttributes(e,t),i.getVdomItemsRoot().cn[t]=e.createVdomReference(),i.fire("cardLoaded",{item:e}),e}async slideCards(e,t){let o,i,n,r,s=this,{container:a}=s,d="vertical"===s.slideDirection,{items:l,vdom:p}=a,h=l[e],c=l[t],u=e>t,m=await a.getDomRect(a.id);delete c.vdom.removeDom,d?(r=u?0:-m.height,i={flexDirection:"column",height:2*m.height+"px",transform:`translateY(${r}px)`,width:`${m.width}px`}):(n=u?0:-m.width,i={height:`${m.height}px`,transform:`translateX(${n}px)`,width:2*m.width+"px"}),p.cn=[{cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],style:i,cn:[h.createVdomReference()]}]}],o=p.cn[0].cn[0],o.cn[u?"unshift":"push"](c.createVdomReference()),a.updateDepth=-1,await a.promiseUpdate(),o.style.transform=d?`translateY(${u?-m.height:0}px)`:`translateX(${u?-m.width:0}px)`,await a.promiseUpdate(),await s.timeout(300),p.cn=[],a.items.forEach((e=>{p.cn.push(e.createVdomReference())})),c.vdom.removeDom=!0,a.updateDepth=-1,await a.promiseUpdate()}}),Neo.setupClass(class extends a{static config={className:"Neo.layout.Fit",ntype:"layout-fit",containerCls:"neo-layout-fit"};applyChildAttributes(e,t){e.ignoreLayout||(e.wrapperCls=r.A.union(e.wrapperCls,"neo-layout-fit-item"))}removeChildAttributes(e,t){if(!e.ignoreLayout){let{wrapperCls:t}=e;r.A.remove(t,"neo-layout-fit-item"),e.wrapperCls=t}}}),Neo.setupClass(class extends a{static config={className:"Neo.layout.Grid",ntype:"layout-grid",containerCls:"neo-layout-grid"}});const d=Neo.setupClass(class extends a{static alignValues=["center","end","start","stretch",null];static directionValues=["column","column-reverse","row","row-reverse",null];static packValues=["center","end","start",null];static wrapValues=["nowrap","wrap","wrap-reverse"];static config={className:"Neo.layout.Flexbox",ntype:"layout-flexbox",align_:null,direction_:null,gap_:null,pack_:null,prefix:"neo-flex-",wrap_:"nowrap"};afterSetAlign(e,t){t&&this.updateInputValue(e,t,"align")}afterSetDirection(e,t){t&&this.updateInputValue(e,t,"direction")}afterSetGap(e,t){if(!e&&!t)return;let{container:o}=this,{wrapperStyle:i}=o;i.gap=e,o.wrapperStyle=i}afterSetPack(e,t){t&&this.updateInputValue(e,t,"pack")}afterSetWrap(e,t){t&&this.updateInputValue(e,t,"wrap")}applyChildAttributes(e,t){let o=e.wrapperStyle,i=o.flex||e.flex||("stretch"===this.align?1:"0 1 auto");1===i&&(i="1 1 auto"),o.flex=i,e.wrapperStyle=o}applyRenderAttributes(){let e=this,{container:t,prefix:o}=e,{wrapperCls:i}=t;t||Neo.logError("layout.Flexbox: applyRenderAttributes -> container not yet created",e.containerId),r.A.add(i,o+"container"),e.align&&r.A.add(i,o+"align-"+e.align),e.direction&&r.A.add(i,o+"direction-"+e.direction),e.pack&&r.A.add(i,o+"pack-"+e.pack),e.wrap&&r.A.add(i,o+"wrap-"+e.wrap),t.wrapperCls=i}beforeSetAlign(e,t){return this.testInputValue(e,t,"alignValues","align")}beforeSetDirection(e,t){return this.testInputValue(e,t,"directionValues","direction")}beforeSetPack(e,t){return this.testInputValue(e,t,"packValues","pack")}beforeSetWrap(e,t){return this.testInputValue(e,t,"wrapValues","wrap")}removeChildAttributes(e,t){let o=e.wrapperStyle||{};o.flex=e.flex||null,e.wrapperStyle=o}removeRenderAttributes(){let e=this,{container:t,prefix:o}=e,{wrapperCls:i}=t;t||Neo.logError("layout.Flexbox: removeRenderAttributes -> container not yet created",e.containerId),r.A.remove(i,o+"container"),e.align&&r.A.remove(i,o+"align-"+e.align),e.direction&&r.A.remove(i,o+"direction-"+e.direction),e.pack&&r.A.remove(i,o+"pack-"+e.pack),e.wrap&&r.A.remove(i,o+"wrap-"+e.wrap),t.wrapperCls=i}testInputValue(e,t,o,i){let n=this.getStaticConfig(o);return r.A.hasItem(n,e)?e:(Neo.logError(this.containerId,'-> layout: supported values for "'+i+'" are',n),t)}updateInputValue(e,t,o){let{container:i,prefix:n}=this,{wrapperCls:s}=i;i?.rendered&&(r.A.remove(s,n+o+"-"+t),null!==e&&r.A.add(s,n+o+"-"+e),i.wrapperCls=s)}});Neo.setupClass(class extends d{static config={className:"Neo.layout.HBox",ntype:"layout-hbox",direction:"row"};applyChildAttributes(e,t){!e.width&&super.applyChildAttributes(e,t)}}),Neo.setupClass(class extends d{static config={className:"Neo.layout.VBox",ntype:"layout-vbox",direction:"column"};applyChildAttributes(e,t){!e.height&&super.applyChildAttributes(e,t)}}),o(7863);const l=({weight:e=0},{weight:t=0})=>e-t;class p extends i.A{static config={className:"Neo.container.Base",ntype:"container",baseCls:["neo-container"],itemDefaults_:null,items_:[],layout_:{ntype:"vbox",align:"stretch"},_vdom:{cn:[]}};add(e){let t=this;return t.insert(t.items?t.items.length:0,e)}afterSetAppName(e,t){let o=this;super.afterSetAppName(e,t),e&&o.items&&o.items.forEach((t=>{Neo.isString(t)||(t.appName=e)})),e&&o.layout&&(o.layout.appName=e)}afterSetLayout(e,t){this.rendered&&(t?.removeRenderAttributes(),e?.applyRenderAttributes(),this.items.forEach(((o,i)=>{t?.removeChildAttributes(o,i),e?.applyChildAttributes(o,i)}))),t?.destroy?.()}afterSetMounted(e,t){if(void 0!==t){super.afterSetMounted(e,t);for(let t=0,{items:o}=this,{length:i}=o;t<i;t++)o[t].vdom.removeDom||(o[t].mounted=e)}}afterSetNeedsVdomUpdate(e,t){e||this.items?.forEach((e=>{"string"!=typeof e&&(e._needsVdomUpdate=!1,e.afterSetNeedsVdomUpdate?.(!1,!0))}))}afterSetRendering(e,t){if(void 0!==t){let{items:t}=this,o=0,i=t.length;for(;o<i;o++)t[o].vdom.removeDom||(t[o].rendering=e)}}afterSetTheme(e,t){super.afterSetTheme(e,t),e&&this.items?.forEach((t=>{Neo.isString(t)||(t.theme=e)}))}afterSetWindowId(e,t){super.afterSetWindowId(e,t);let{layout:o}=this;e&&this.items?.forEach((t=>{Neo.isString(t)||(t.windowId=e)})),e&&o&&!Neo.isString(o)&&(o.windowId=e)}beforeSetItems(e,t){if("Object"===Neo.typeOf(e)){let t,o,i=[];for(const n in e)o=e[n],o.reference=n,i.push(o),t||="weight"in o;t&&i.sort(l),e=i}return e}beforeSetLayout(e,t){return this.createLayout(e)}createItem(e,t){let o,n,r,s=this,a={appName:s.appName,parentId:s.id,parentIndex:t,windowId:s.windowId},d={...s.itemDefaults};switch(d&&(e.module&&delete d.ntype,e.ntype&&delete d.module),Neo.typeOf(e)){case"NeoClass":e=Neo.create({theme:e.config.theme||s.theme,...d,module:e,...a});break;case"NeoInstance":r=e.parent,r&&r!==s&&(r.remove?.(e,!1),delete e.vdom.removeDom,e.controller||s.getController()||!r.getController()||(e.controller={parent:r.getController()})),e.set(a),e.getStateProvider()?.parseConfig(e);break;case"Object":d&&Neo.assignDefaults(e,d),e.module||e.ntype||e.className||(e.module=i.A),n=e.module,o=n&&!n.isClass&&Neo.isFunction(n),n&&!o&&(e.className=n.prototype.className,e.theme=d.theme||n.config.theme||s.theme),"this"===e.handlerScope&&(e.handlerScope=s,"String"===Neo.typeOf(e.handler)&&"Function"===Neo.typeOf(s[e.handler])&&(e.handler=s[e.handler])),Object.assign(e,a),o?e.vdom=Object.assign(e.vdom||{},{removeDom:!0}):e=Neo[e.className?"create":"ntype"](e);break;case"String":e=Neo.create({module:i.A,vdom:{innerHTML:e},...a})}return e}createItems(){let e,t=this,o=t._items,i=t.getVdomItemsRoot(),{layout:n}=t;i.cn=[],o.forEach(((r,s)=>{o[s]=r=t.createItem(r,s),r instanceof Neo.core.Base?(n?.applyChildAttributes(r,s),e=r.createVdomReference()):e=r.vdom,i.cn.push(e)})),t.updateDepth=-1,t.update(),t.fire("itemsCreated",{id:t.id,items:o})}createLayout(e){if(e){let t=this,{appName:o,id:i,windowId:n}=t;e instanceof a&&e.isLayout?Object.assign(e,{appName:o,containerId:i,windowId:n}):(e=t.parseLayoutClass(e),Object.assign(e,{appName:o,containerId:i,windowId:n}),e=Neo.ntype(e))}return e}destroy(e=!1,t=!1){this.layout?.destroy(),this.items?.forEach((e=>{e.destroy?.(!1,!0)})),super.destroy(e,t)}getItem(e,t=this.items){let o,i,n=0,r=t.length;for(;n<r;n++){if(i=t[n],i.reference===e)return i;if(i.items&&(o=this.getItem(e,i.items),o))return o}return null}getVdomItemsRoot(){return this.getVdomRoot()}indexOf(e){let t=this,o=0,i=t.items?.length||0;for(Neo.isString(e)||(e=e.id);o<i;o++)if(t.items[o].id===e)return o;return-1}insert(e,t,o=!1){let i,n,r,s=this,{items:a}=s;if(Array.isArray(t)){for(i=0,n=t.length,r=[];i<n;i++)r.unshift(s.insert(e,t[n-1-i],!0));t=r}else t=s.createItem(t,e),s.layout.applyChildAttributes(t,e,!0),a.splice(e,0,t),s.items=a,s.getVdomItemsRoot().cn.splice(e,0,t.createVdomReference());return o||(s.updateDepth=-1,s.promiseUpdate().then((()=>{s.fire("insert",{index:e,item:t})}))),t}async loadItems({options:e={},url:t}){let o=await fetch(t,e),i=await o.json();return i.modules?.length>0&&await Promise.all(i.modules.map((e=>(e.startsWith("http")||(e=("development"===Neo.config.environment?"../../":"../../../../")+e),import(e))))),i.items}mergeConfig(...e){let t,o=this,i=super.mergeConfig(...e);return i.itemDefaults&&(o._itemDefaults=Neo.clone(i.itemDefaults,!0,!0),delete i.itemDefaults),i.items&&(t=o.constructor.config.items,"Object"===Neo.typeOf(i.items)?Neo.isArray(t)?o.items=Neo.clone(i.items,!0,!0):o.items=Neo.merge(Neo.clone(t),i.items):o._items=Neo.clone(i.items,!0,!0),delete i.items),i}moveTo(e,t){let o=this.items[e];return e!==t&&this.switchItems(t,e),o}onConstructed(){let e=this;e._layout=e.createLayout(e.layout),e._layout?.applyRenderAttributes(),super.onConstructed(),e.parseItemConfigs(e.items),e.createItems()}parseLayoutClass(e){return Neo.isObject(e)?e.ntype.startsWith("layout-")||(e.ntype=`layout-${e.ntype}`):e={ntype:e.startsWith("layout-")?e:`layout-${e}`},e}remove(e,t=!0,o=!1){let i=[...this.items],n=0,r=i.length;for(;n<r;n++)if(i[n].id===e.id)return this.removeAt(n,t,o)}removeAll(e=!0,t=!1){let o=this;o.items.forEach((t=>{e?t.destroy(!0,!0):t.mounted=!1})),o.items=[],o.getVdomItemsRoot().cn=[],t&&!e||o.update()}removeAt(e,t=!0,o=!1){let i,n=this,{items:r}=n;if(!(e>=r.length))return i=r[e],r.splice(e,1),n.getVdomItemsRoot().cn.splice(e,1),n.updateDepth=2,!o&&n.update(),t?(i.destroy(!0,o),null):(n.layout?.removeChildAttributes(i),i.mounted=!1,i);Neo.warn("Container.removeAt: index >= items.length. "+n.id)}removeLast(e=!0,t=!1){this.removeAt(this.items.length-1,e,t)}replaceAt(e,t,o=!0,i=!1){this.removeAt(e,o,!0),this.insert(e,t,i)}switchItems(e,t){let o=this,i=Neo.isNumber(e)?e:o.indexOf(e),n=Neo.isNumber(t)?t:o.indexOf(t);r.A.move(o.items,n,i),r.A.move(o.getVdomItemsRoot().cn,n,i),o.updateDepth=2,o.update()}}const h=Neo.setupClass(p)}}]);