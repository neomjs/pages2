"use strict";(self.webpackChunkneo_offscreen_canvas_demo=self.webpackChunkneo_offscreen_canvas_demo||[]).push([[506,880],{506:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var i=o(880);class s extends i.default{static config={className:"Neo.main.addon.WindowPosition",adjustWindowPositions:!1,intervalId:null,intervalTime:20,observeResize_:!1,remote:{app:["registerWindow","setConfigs","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,windows:{}};resizeListener=null;construct(e){super.construct(e);let t=this,{screenLeft:o,screenTop:i}=window;t.screenLeft=o,t.screenTop=i,window.addEventListener("mouseout",t.onMouseOut.bind(t))}afterSetObserveResize(e,t){let o=this;o.resizeListener||(o.resizeListener=o.onResize.bind(o)),window[e?"addEventListener":"removeEventListener"]("resize",o.resizeListener)}adjustPositions(){Object.entries(this.windows).forEach((([e,t])=>{let{left:o,top:i}=this.getPosition(t);Neo.Main.windowMoveTo({windowName:e,x:o,y:i})}))}checkMovement(){let e,t=this,{Manager:o}=Neo.worker,i=window,{screenLeft:s,screenTop:n}=i;t.screenLeft===s&&t.screenTop===n||(e=Neo.Main.getWindowData(),t.adjustWindowPositions&&t.adjustPositions(),o.sendMessage("app",{action:"windowPositionChange",data:{appName:o.appName,...e}}),t.screenLeft=s,t.screenTop=n)}dockDirectionChange(e,t){return!(("bottom"!==e&&"top"!==e||"left"!==t&&"right"!==t)&&("bottom"!==t&&"top"!==t||"left"!==e&&"right"!==e))}getPosition(e){let t,o,{size:i}=e,s=window,{screenLeft:n,screenTop:a}=s;switch(e.dock){case"bottom":t=n,o=s.outerHeight+a-62;break;case"left":t=n-i,o=a+24;break;case"right":t=s.outerWidth+n,o=a+24;break;case"top":t=n,o=a-i+86}return{left:t,top:o}}onMouseOut(e){let t=this;e.toElement?t.intervalId&&(clearInterval(t.intervalId),t.intervalId=null):t.intervalId||(t.intervalId=setInterval(t.checkMovement.bind(t),t.intervalTime))}onResize(e){let t,o,i=this,s=window;Object.entries(i.windows).forEach((([e,n])=>{switch(n.dock){case"bottom":case"top":o=s.outerWidth;break;case"left":case"right":t=s.outerHeight-28}i.adjustWindowPositions&&(Neo.Main.windowResizeTo({height:t,width:o,windowName:e}),i.adjustPositions())}))}registerWindow(e){this.windows[e.name]=e}setConfigs(e){delete e.appName,this.set(e)}setDock(e){let t,o,i=this,{dock:s,name:n}=e,a=i.windows[n];a&&(t=i.dockDirectionChange(s,a.dock),a.dock=s,o=i.getPosition(a),t&&Neo.Main.windowResizeTo({height:"bottom"===s||"top"===s?a.size:window.outerHeight-28,width:"left"===s||"right"===s?a.size:window.outerWidth,windowName:n}),Neo.Main.windowMoveTo({windowName:n,x:o.left,y:o.top}))}unregisterWindow(e){delete this.windows[e.name]}}const n=Neo.setupClass(s)},880:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var i=o(607);class s extends i.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let t=this;t.loadFiles&&(0===t.preloadFilesDelay?t.loadFiles():Neo.isNumber(t.preloadFilesDelay)&&(t.loadingTimeoutId=setTimeout((()=>{t.loadFiles()}),t.preloadFilesDelay)))}afterSetIsReady(e,t){if(e){let e,t=this;t.cache.forEach((o=>{e=t[o.fn](o.data),o.resolve(e)})),t.cache=[]}}cacheMethodCall(e){let t=this;return t.isLoading||(t.loadingTimeoutId&&clearTimeout(t.loadingTimeoutId),t.loadingTimeoutId=null,t.loadFiles()),new Promise(((o,i)=>{t.cache.push({...e,resolve:o})}))}}const n=Neo.setupClass(s)}}]);