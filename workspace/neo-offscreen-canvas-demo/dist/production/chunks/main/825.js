"use strict";(self.webpackChunkneo_offscreen_canvas_demo=self.webpackChunkneo_offscreen_canvas_demo||[]).push([[825,880],{825:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var o=t(880),s=t(263),i=t(96);class d extends o.default{static config={className:"Neo.main.addon.MonacoEditor",libraryBasePath:Neo.config.basePath+"node_modules/monaco-editor/min/vs",remote:{app:["createInstance","destroyInstance","getValue","layoutEditor","setLanguage","setTheme","setValue","updateOptions"]}};map={};createInstance(e){let a,t,o=this,{id:i}=e;if(!o.isReady)return o.cacheMethodCall({fn:"createInstance",data:e});delete e.appName,delete e.id,t=s.A.getElement(i),t?(a=o.map[i]=monaco.editor.create(t,e),a.getModel().onDidChangeContent(o.onContentChange.bind(o,i))):"development"===Neo.config.environment&&console.warn(`addon.MonacoEditor: node ${i} not found`)}destroyInstance(e){if(!this.isReady)return this.cacheMethodCall({fn:"destroyInstance",data:e});delete this.map[e.id]}getValue(e){let a=this;return a.isReady?a.map[e.id].getModel().getValue():a.cacheMethodCall({fn:"getValue",data:e})}layoutEditor(e){this.isReady&&this.map[e.id].layout()}async loadFiles(){let e=this,a=e.libraryBasePath;e.isLoading=!0,window.require={paths:{vs:a}},await s.A.loadScript(a+"/loader.js"),await Promise.all([s.A.loadStylesheet(a+"/editor/editor.main.css",{name:"vs/editor/editor.main"}),s.A.loadScript(a+"/editor/editor.main.nls.js"),s.A.loadScript(a+"/editor/editor.main.js")]),e.isLoading=!1,e.isReady=!0}onContentChange(e,a){let t=s.A.getElement(e),o=i.A.getPathFromElement(t).map((e=>i.A.getTargetData(e)));i.A.sendMessageToApp({event:a,id:e,path:o,type:"editorChange",value:this.map[e].getModel().getValue()})}setLanguage(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setLanguage",data:e});a.map[e.id].getModel().setLanguage(e.value)}setTheme(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setTheme",data:e});a.map[e.id]._themeService.setTheme(e.value)}setValue(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setValue",data:e});a.map[e.id].getModel().setValue(e.value)}updateOptions(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"updateOptions",data:e});a.map[e.id].updateOptions(e.options)}}const n=Neo.setupClass(d)},880:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});var o=t(607);class s extends o.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let a=this;a.loadFiles&&(0===a.preloadFilesDelay?a.loadFiles():Neo.isNumber(a.preloadFilesDelay)&&(a.loadingTimeoutId=setTimeout((()=>{a.loadFiles()}),a.preloadFilesDelay)))}afterSetIsReady(e,a){if(e){let e,a=this;a.cache.forEach((t=>{e=a[t.fn](t.data),t.resolve(e)})),a.cache=[]}}cacheMethodCall(e){let a=this;return a.isLoading||(a.loadingTimeoutId&&clearTimeout(a.loadingTimeoutId),a.loadingTimeoutId=null,a.loadFiles()),new Promise(((t,o)=>{a.cache.push({...e,resolve:t})}))}}const i=Neo.setupClass(s)}}]);