"use strict";(self.webpackChunkneo_offscreen_canvas_demo=self.webpackChunkneo_offscreen_canvas_demo||[]).push([[208],{208:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(324),o=n(96);let c=!1;window.addEventListener("touchmove",(e=>{c&&e.cancelable&&e.preventDefault()}),{cancelable:!0,passive:!1});class r extends a.A{static config={className:"Neo.main.draggable.sensor.Touch",delay:200,minDistance:0,pageX:null,pageY:null,tapTimeout:null,touchStartTime:0};construct(e){super.construct(e),Neo.bindMethods(this,["onDistanceChange","onTouchEnd","onTouchMove","onTouchStart","startDrag"])}attach(){document.addEventListener("touchstart",this.onTouchStart)}detach(){document.removeEventListener("touchstart",this.onTouchStart)}onDistanceChange(e){let t=this;if(t.currentElement){const{pageX:n,pageY:a}=o.A.getTouchCoords(e),c=o.A.getTouchCoords(t.startEvent),r=Date.now()-t.touchStartTime,s=o.A.getDistance(c.pageX,c.pageY,n,a)||0;Object.assign(t,{pageX:n,pageY:a}),r>=t.delay&&s>=t.minDistance&&(clearTimeout(t.tapTimeout),document.removeEventListener("touchmove",t.onDistanceChange),t.startDrag())}}onTouchEnd(e){c=!1;let t=this;if(clearTimeout(t.tapTimeout),document.removeEventListener("dragstart",s),document.removeEventListener("touchcancel",t.onTouchEnd),document.removeEventListener("touchend",t.onTouchEnd),document.removeEventListener("touchmove",t.onDistanceChange),t.dragging){const{pageX:n,pageY:a}=o.A.getTouchCoords(e);let c=t.currentElement,r=document.elementFromPoint(n-window.scrollX,a-window.scrollY);e.preventDefault(),t.trigger(c,{clientX:n,clientY:a,element:c,eventPath:o.A.getPathFromElement(r),originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:r,type:"drag:end"}),document.removeEventListener("contextmenu",s,!0),document.removeEventListener("touchmove",t.onTouchMove),Object.assign(t,{currentElement:null,dragging:!1,startEvent:null})}t.dragging=!1}onTouchMove(e){let t=this;if(t.dragging){const{pageX:n,pageY:a}=o.A.getTouchCoords(e);let c=t.currentElement,r=document.elementFromPoint(n-window.scrollX,a-window.scrollY);t.trigger(c,{clientX:n,clientY:a,element:c,eventPath:o.A.getPathFromElement(r),originalEvent:e,path:t.startEvent.path||t.startEvent.composedPath(),target:r,type:"drag:move"})}}onTouchStart(e){let t=this,n=o.A.testPathInclusion(e,t.dragTargetClasses);if(n){const{pageX:a,pageY:c}=o.A.getTouchCoords(e);e.path||(e.path=e.composedPath()),Object.assign(t,{currentElement:n.node,pageX:a,pageY:c,startEvent:e,touchStartTime:Date.now()}),document.addEventListener("dragstart",s),document.addEventListener("touchcancel",t.onTouchEnd),document.addEventListener("touchend",t.onTouchEnd),document.addEventListener("touchmove",t.onDistanceChange,{cancelable:!0}),t.tapTimeout=setTimeout((()=>{t.onDistanceChange({touches:[{pageX:t.pageX,pageY:t.pageY}]})}),t.delay)}}startDrag(){let e=this,t=e.currentElement,{startEvent:n}=e,a=o.A.getTouchCoords(e.startEvent);e.trigger(t,{clientX:a.pageX,clientY:a.pageY,element:t,originalEvent:n,path:n.path||n.composedPath(),target:n.target,type:"drag:start"}),e.dragging=!0,e.dragging&&(document.addEventListener("contextmenu",s,!0),document.addEventListener("touchmove",e.onTouchMove)),c=e.dragging}}function s(e){e.preventDefault(),e.stopPropagation()}const i=Neo.setupClass(r)},324:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(607);class o extends a.A{static config={className:"Neo.main.draggable.sensor.Base",currentElement:null,dragTargetClasses:["neo-draggable","neo-resizable"],isDragging:!1,lastEvent:null,startEvent:null};attach(){}detach(){}onConstructed(){this.attach(),super.onConstructed()}trigger(e,t){const n=document.createEvent("Event");return n.detail=t,n.initEvent(t.type,!0,!0),e.dispatchEvent(n),this.lastEvent=t,t}}const c=Neo.setupClass(o)}}]);