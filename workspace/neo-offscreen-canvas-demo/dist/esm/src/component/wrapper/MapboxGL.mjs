import e from"../Base.mjs";class a extends e{static getConfig(){return{className:"Neo.component.wrapper.MapboxGL",ntype:"mapboxgl",accessToken:null,center_:{lat:0,lng:0},convertDataToGeoJson:!0,chartData_:null,dataSourceId:null,layers_:null,mapboxStyle_:null,sources_:null,_vdom:{style:{position:"relative",height:"100%",width:"100%"},cn:[{style:{position:"absolute",height:"100%",width:"100%"},cn:[{style:{height:"100%"}}]}]},zoom_:3}}afterSetCenter(e,a){this.centerMap(e)}afterSetChartData(e,a){let t=this;e&&Neo.main.addon.MapboxGL.updateData({appName:t.appName,data:e,dataSourceId:t.dataSourceId,id:t.id})}afterSetLayers(e,a){e&&Neo.main.addon.MapboxGL.addLayers({appName:this.appName,id:this.id,layers:e})}afterSetMapboxStyle(e,a){let t=this;this.mounted&&Neo.main.addon.MapboxGL.setStyle({accessToken:t.accessToken,appName:t.appName,id:t.id,style:e})}afterSetMounted(e,a){let t=this;if(!1===e&&void 0!==a&&Neo.main.addon.MapboxGL.destroy({appName:t.appName,id:t.id}),super.afterSetMounted(e,a),e){const e={accessToken:t.accessToken,appName:t.appName,center:t.center,id:t.id,mapboxStyle:t.mapboxStyle,zoom:t.zoom};t.chartData&&(e.data=t.chartData,e.dataSourceId=t.dataSourceId),t.layers&&(e.layers=t.layers),t.sources&&(e.sources=t.sources),Neo.main.addon.MapboxGL.create(e).then(t.onMapMounted)}}afterSetSources(e,a){e&&Neo.main.addon.MapboxGL.addSources({appName:this.appName,id:this.id,sources:e})}afterSetZoom(e,a){let t=this;t.mounted&&Neo.main.addon.MapboxGL.zoom({appName:t.appName,id:t.id,zoom:e})}autoResize(){Neo.main.addon.MapboxGL.autoResize({appName:this.appName,id:this.id})}beforeSetCenter(e,a){return e&&e.long&&(e.lng=e.long,delete e.long),e}beforeSetChartData(e,a){return e&&this.convertDataToGeoJson&&(e=this.convertToGeoJson(e)),e}centerMap(e,a=!1){Neo.main.addon.MapboxGL.center({animate:a,appName:this.appName,id:this.id,lat:e.lat,lng:e.lng})}convertToGeoJson(e){const a={type:"FeatureCollection",features:[]};return e.forEach((e=>{a.features.push({type:"Feature",properties:{active:e.active,cases:e.cases,deaths:e.deaths,id:e.countryInfo.iso2,recovered:e.recovered,time:e.updated},geometry:{type:"Point",coordinates:[e.countryInfo.long,e.countryInfo.lat]}})})),a}flyTo(e){const a=this;e=a.beforeSetCenter(e,null),a._center={lat:e.lat,lng:e.lng},a.centerMap(e,!0)}getVdomRoot(){return this.vdom.cn[0].cn[0]}getVnodeRoot(){return this.vnode.childNodes[0].childNodes[0]}onMapMounted(){}setFilter(e){Neo.main.addon.MapboxGL.setFilter({appName:this.appName,id:this.id,layerId:e.layerId,options:e.options,value:e.value})}setLayoutProperty(e){Neo.main.addon.MapboxGL.setLayoutProperty({appName:this.appName,id:this.id,key:e.key,layerId:e.layerId,options:e.options,value:e.value})}setPaintProperty(e){Neo.main.addon.MapboxGL.setPaintProperty({appName:this.appName,id:this.id,key:e.key,layerId:e.layerId,options:e.options,value:e.value})}}Neo.applyClassConfig(a);export{a as default};