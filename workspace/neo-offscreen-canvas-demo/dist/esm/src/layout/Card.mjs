import e from"./Base.mjs";import t from"../util/Array.mjs";class o extends e{static getStaticConfig(){return{activeItemCls:"active-item",inactiveItemCls:"inactive-item",itemCls:"neo-layout-card-item"}}static getConfig(){return{className:"Neo.layout.Card",ntype:"layout-card",activeIndex_:0,removeInactiveCards:!0}}async afterSetActiveIndex(e,o){let a,i,r,s,c,n,l,d,m,v=this,C=v.containerId,u=Neo.getComponent(C)||Neo.get(C),g=v.getStaticConfig(),I=!1;if(Neo.isNumber(e)&&u){for(c=u.items,m=u.vdom,n=c.length,c[e]||Neo.error("Trying to activate a non existing card",e,c),i=0;i<n;i++)if(l=c[i].module,i===e&&!l?.isClass&&Neo.isFunction(l)){I=!0;break}for(i=0;i<n;i++)r=i===e,s=c[i],l=s.module,r&&!l?.isClass&&Neo.isFunction(l)&&(l=await l(),l=l.default,d=l.prototype,a=s.cls||d.constructor.config.cls||[],s.className=d.className,s.cls=[...a,g.itemCls],s.module=l,delete s.vdom,c[i]=s=Neo.create(s),u.fire("cardLoaded",{item:s}),m.cn[i]=s.vdom),s instanceof Neo.core.Base&&(a=s.cls,t.remove(a,r?g.inactiveItemCls:g.activeItemCls),t.add(a,r?g.activeItemCls:g.inactiveItemCls),v.removeInactiveCards||I?(s._cls=a,s.getVdomRoot().cls=a,r?(delete s.vdom.removeDom,s.activate?.()):(s.mounted=!1,s.vdom.removeDom=!0)):s.cls=a);(v.removeInactiveCards||I)&&(u.vdom=m)}}applyChildAttributes(e,o,a=!1){let i=this,r=i.activeIndex===o,s=i.getStaticConfig(),c=e.cls,n=e.vdom;t.add(c,s.itemCls),t.add(c,r?s.activeItemCls:s.inactiveItemCls),!a&&i.removeInactiveCards?(e._cls=c,n.removeDom=!r,e.vdom=n):e.cls=c}applyRenderAttributes(){let e=this,o=Neo.getComponent(e.containerId),a=o?.cls||[];o||Neo.logError("layout.Card: applyRenderAttributes -> container not yet created",e.containerId),t.add(a,"neo-layout-card"),o.cls=a}removeRenderAttributes(){let e=this,o=Neo.getComponent(e.containerId),a=o?.cls||[];o||Neo.logError("layout.Card: removeRenderAttributes -> container not yet created",e.containerId),t.remove(a,"neo-layout-card"),o.cls=a}}Neo.applyClassConfig(o);export{o as default};