import e from"../core/Base.mjs";import s from"../util/Array.mjs";class r extends e{static getConfig(){return{className:"Neo.util.KeyNavigation",ntype:"keynav",component_:null,keyDownEventBubble:!1,keys_:null}}add(e){this._keys.push(...this.parseKeys(e))}beforeGetComponent(){return Neo.getComponent(this._component)}beforeSetComponent(e){return e?.id}destroy(){this.unregister(),super.destroy()}onKeyDown(e){if(e.key){let s,r=this,t=e.key.toUpperCase();t=r.parseUpperCaseKey(t),r.keys.forEach((r=>{s=Neo.get(r.scope),r.key.toUpperCase()===t&&s[r.fn]&&s[r.fn].apply(s,[e])}))}}parseKeys(e){if(!Array.isArray(e)){let s=this._component,r=[];s&&(Object.entries(e).forEach((([e,t])=>{r.push({fn:t,key:e,scope:s})})),e=r)}return e}parseUpperCaseKey(e){switch(e){case" ":e="SPACE";break;case"ARROWDOWN":e="DOWN";break;case"ARROWLEFT":e="LEFT";break;case"ARROWRIGHT":e="RIGHT";break;case"ARROWUP":e="UP"}return e}register(e){let s=this,r=e.domListeners;s.component=e,s.keys=s.parseKeys(s.keys),r&&(r.push({keydown:{fn:s.onKeyDown,bubble:s.keyDownEventBubble,scope:s}}),e.domListeners=r)}removeKey(e){let r,t=this._keys,o=0,n=t.length;for(;o<n;o++)if(r=t[o],Neo.isEqual(r,e)){s.remove(t,r);break}}removeKeys(e){Array.isArray(e)&&e.forEach((e=>this.removeKey(e)))}unregister(){}}Neo.applyClassConfig(r);export default r;