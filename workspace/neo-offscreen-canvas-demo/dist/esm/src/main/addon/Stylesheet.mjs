import e from"../../core/Base.mjs";class t extends e{static getConfig(){return{className:"Neo.main.addon.Stylesheet",remote:{app:["addThemeFiles","createStyleSheet","insertCssRules","swapStyleSheet"]},singleton:!0}}constructor(e){super(e),Neo.config.useFontAwesome&&this.createStyleSheet(null,null,Neo.config.basePath+"node_modules/@fortawesome/fontawesome-free/css/all.min.css"),Neo.config.themes.length>0&&""!==Neo.config.themes[0]&&this.addGlobalCss()}addGlobalCss(){let e=Neo.config,t=e.themes,s=e.useCssVars?["src",...t]:[t[0]],n=e.environment,o=n.startsWith("dist/")?n:"dist/"+n;document.body.classList.add(t[0]),s.forEach((t=>{t.startsWith("neo-")&&(t=t.substring(4)),this.createStyleSheet(null,null,`${e.basePath}${o}/css${e.useCssVars?"":"-no-vars"}/${t}/Global.css`)}))}addThemeFiles(e){let t=e.className,s=Neo.config,n=s.environment,o=n.startsWith("dist/")?n:"dist/"+n;t.startsWith("Neo.")&&(t=t.substring(4)),t=t.split(".").join("/"),e.folders.forEach((e=>{("src"===e&&s.useCssVars||e.includes("theme-")&&(s.useCssVars&&s.themes.includes(`neo-${e}`)||!s.useCssVars&&s.themes[0]===`neo-${e}`))&&this.createStyleSheet(null,null,`${s.basePath}${o}/css${s.useCssVars?"":"-no-vars"}/${e}/${t}.css`)}))}createStyleSheet(e,t,s){if(!e&&!s)throw new Error("createStyleSheet: you need to either pass a name or a href");const n=document.createElement("link"),o=Neo.config.environment,l=o.startsWith("dist/")?o:"dist/"+o,r=s||Neo.config.basePath+l+"/"+e;Object.assign(n,{href:r,rel:"stylesheet",type:"text/css"}),t&&(n.id=t),document.head.appendChild(n)}hasStyleSheet(e){let t,s=0,n=document.styleSheets.length;for(;s<n;s++)if(t=document.styleSheets[s],t.href?.includes(e))return!0;return!1}insertCssRules(e){let t,s=document.getElementById("neoDynamicStyleSheet"),n=0,o=e.rules.length;for(s||(s=document.createElement("style"),s.id="neoDynamicStyleSheet",document.head.appendChild(s)),t=s.sheet;n<o;n++)t.insertRule(e.rules[n],t.cssRules.length)}removeStyleSheets(e){let t,s,n=0,o=document.styleSheets.length,l=e.included||[],r=e.included||[];for(;n<o;n++)t=document.styleSheets[n],s=!0,t.href&&(r.forEach((e=>{t.href.includes(e)&&(s=!1)})),s&&(l.forEach((e=>{t.href.includes(e)||(s=!1)})),s&&t.ownerNode.parentNode.removeChild(t.ownerNode)))}swapStyleSheet(e){document.getElementById(e.id).setAttribute("href",e.href)}}Neo.applyClassConfig(t);let s=Neo.create(t);Neo.applyToGlobalNs(s);export default s;