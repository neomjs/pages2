import e from"../Model.mjs";import t from"../../util/VDom.mjs";class o extends e{static getConfig(){return{className:"Neo.selection.table.ColumnModel",ntype:"selection-table-columnmodel",cls:"neo-selection-columnmodel"}}addDomListener(){let e=this,t=e.view,o=t.domListeners;o.push({click:e.onCellClick,delegate:".neo-table-cell",scope:e}),t.domListeners=o}static getCellId(e){let t=null,o=0,l=e.length;for(;o<l;o++)if("td"===e[o].tagName){t=e[o].id;break}return t}static getColumnIndex(e,t){let o=e.split("__")[2];return t.map((e=>e.dataField)).indexOf(o)}onCellClick(e){let l,s,n,i=this,d=o.getCellId(e.path);d&&(s=o.getColumnIndex(d,i.view.items[0].items),n=t.findVdomChild(i.view.vdom,{tag:"tbody"}).vdom,l=t.getColumnNodesIds(n,s),i.select(l))}onKeyDownLeft(e){this.onNavKeyColumn(e,-1)}onKeyDownRight(e){this.onNavKeyColumn(e,1)}onNavKeyColumn(e,l){let s,n,i,d=this,m=o.getCellId(e.path).split("__"),a=m[2],r=d.view,g=r.columns.map((e=>e.dataField)),c=(g.indexOf(a)+l)%g.length;for(;c<0;)c+=g.length;m[2]=g[c],n=m.join("__"),i=t.findVdomChild(d.view.vdom,{tag:"tbody"}).vdom,s=t.getColumnNodesIds(i,c),d.select(s),r.focus(n)}register(e){super.register(e);let t=this.id,o=this.view;o.keys&&o.keys._keys.push({fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t})}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e}]),super.unregister()}}Neo.applyClassConfig(o);export{o as default};