import e from"../util/Date.mjs";import t from"./Model.mjs";class o extends t{static getConfig(){return{className:"Neo.selection.DateSelectorModel",ntype:"selection-dateselectormodel",stayInColumn:!1}}getCellDate(e){let t,o,n=this.getSelection();return t=n[0]?n[0].split("__"):e.path[0].id.split("__"),o=t[1].split("-").map((e=>parseInt(e))),o[1]--,new Date(...o)}onKeyDownDown(e){this.onNavKeyRow(e,7)}onKeyDownLeft(e){this.onNavKeyColumn(e,-1)}onKeyDownRight(e){this.onNavKeyColumn(e,1)}onKeyDownUp(e){this.onNavKeyRow(e,-7)}onNavKeyColumn(t,o){let n,s,l,i=this,y=i.getCellDate(t),a=i.view;n=e.getDaysInMonth(y),l=(y.getDate()+o)%n,l=0===l?n:l,s=a.getCellId(y.getFullYear(),y.getMonth()+1,l),i.select(s),a.focus(s)}onNavKeyRow(t,o){let n,s,l,i=this,y=i.getCellDate(t),a=i.view;if(n=e.getDaysInMonth(y),l=y.getDate()+o,l>n)for(i.stayInColumn||(l+=1);l>7;)l-=o;else if(l<1)for(i.stayInColumn||(l-=1);l<n-6;)l-=o;s=a.getCellId(y.getFullYear(),y.getMonth()+1,l),i.select(s),a.focus(s)}register(e){super.register(e);let t=this.id,o=this.view;o.keys&&o.keys._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}unregister(){let e=this.id,t=this.view;t.keys&&t.keys.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.applyClassConfig(o);export{o as default};