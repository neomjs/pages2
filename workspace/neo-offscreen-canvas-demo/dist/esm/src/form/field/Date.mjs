import e from"../../component/DateSelector.mjs";import t from"./trigger/Date.mjs";import o from"../../util/Date.mjs";import r from"./Picker.mjs";import n from"../../util/VDom.mjs";class a extends r{static getConfig(){return{className:"Neo.form.field.Date",ntype:"datefield",cls:["neo-datefield","neo-pickerfield","neo-textfield"],dateSelector:null,dateSelectorConfig:null,hidePickerOnSelect:!1,inputType:"date",pickerHeight:225,pickerWidth:200,triggers:[{module:t}]}}constructor(t){super(t);let r=this;r.dateSelector=Neo.create(e,{dayNameFormat:"short",value:r.value||o.convertToyyyymmdd(new Date),...r.dateSelectorConfig}),r.dateSelector.keys._keys.push({fn:"onContainerKeyDownEscape",key:"Escape",scope:r.id}),r.dateSelector.on({change:r.onDatePickerChange,scope:r})}createPickerComponent(){return this.dateSelector}onContainerKeyDownEscape(e){let t=this;t.hidePicker(),t.focus(t.getInputElId())}onDatePickerChange(e){let t=this,o=t.vdom;t.hidePickerOnSelect?(n.removeVdomChild(o,t.getPickerId()),t.promiseVdomUpdate().then((o=>{t.value=e.value}))):t.value=e.value}onInputValueChange(e){let t=this,o=e.value,r=t.value;!0===e.valid&&(super.onInputValueChange(e),o!==r&&(t.dateSelector.value=o))}onKeyDownEnter(e){let t=this;t.pickerIsMounted?(t.dateSelector.focusCurrentItem(),super.onKeyDownEnter(e)):super.onKeyDownEnter(e,t.dateSelector.focusCurrentItem,t.dateSelector)}}Neo.applyClassConfig(a);export{a as default};