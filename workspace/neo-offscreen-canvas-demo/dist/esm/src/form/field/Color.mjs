import e from"../../list/Color.mjs";import o from"./Select.mjs";import t from"../../util/VDom.mjs";class r extends o{static getConfig(){return{className:"Neo.form.field.Color",ntype:"colorfield",cls:["neo-colorfield","neo-selectfield","neo-pickerfield","neo-textfield"],colorField:"name",colorFormatter:(e,o)=>o[e.colorField],listConfig:{module:e,colorField:"@config:colorField",colorFormatter:"@config:colorFormatter",silentSelectUpdate:!0}}}constructor(e){super(e);let o=this,r=o.vdom;t.findVdomChild(r,{id:o.getInputWrapperId()}).vdom.cn.unshift({cls:"neo-color",id:o.getColorIndicatorId(),style:{backgroundColor:o.getColor()}}),o.vdom=r}afterSetValue(e,o,r=!1){let l=this,i=t.findVdomChild(l.vdom,{id:l.getColorIndicatorId()})?.vdom,s=l.list,c=l.record,d=l.list?.selectionModel;i&&(i.style.backgroundColor=l.getColor()),c?d?.select(s.getItemId(c[l.store.keyProperty])):d?.deselectAll(!0),super.afterSetValue(e,o,r)}getColor(){let e=this,o=e.record,t=e.value;return o?e.colorFormatter(e,o):e.forceSelection?null:t}getColorIndicatorId(){return`${this.id}__color-indicator`}onSelectPostLastItem(){let e=this.list,o=e.store.getCount()-1;e.vdom.cn[o]=e.createItem(e.store.getAt(o),o),super.onSelectPostLastItem()}onSelectPreFirstItem(){let e=this.list;e.vdom.cn[0]=e.createItem(e.store.getAt(0),0),super.onSelectPreFirstItem()}}Neo.applyClassConfig(r);export{r as default};