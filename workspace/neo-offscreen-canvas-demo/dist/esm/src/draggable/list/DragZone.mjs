import e from"../../draggable/DragZone.mjs";import t from"../../util/Array.mjs";import o from"../../util/VDom.mjs";class r extends e{static getConfig(){return{className:"Neo.draggable.list.DragZone",ntype:"list-dragzone",dragProxyConfig:{cls:["neo-list"]}}}constructor(e){super(e);let t=this,o=t.owner,r=o.domListeners,a={delegate:".neo-draggable",scope:t},s=o.store;r.push({"drag:end":t.onDragEnd,...a},{"drag:start":t.onDragStart,...a}),o.domListeners=r,s.on({load:t.onStoreLoad,scope:t}),s.getCount()>0&&t.onStoreLoad()}adjustListItemCls(e){let o,r=this,a=r.owner,s=a.store,d=a.vdom;s.items.forEach(((a,s)=>{o=r.getItemVdom(a,s),o&&(o.cls=o.cls||[],t[e?"add":"remove"](o.cls,"neo-draggable"))})),a.vdom=d}getItemVdom(e,t){return this.owner.vdom.cn[t]}onDragEnd(e){if(this.owner.draggable){let e=this,o=e.dragProxy,r=o.cls||{},a=e.dragElementRect,s=o.wrapperStyle||{};t.add(r,"neo-animate"),o.cls=r,setTimeout((()=>{s.left=`${a.left}px`,s.top=`${a.top}px`,o.wrapperStyle=s,setTimeout((()=>{e.dragEnd()}),300)}),30)}}onDragStart(e){let t=this;t.owner.draggable&&(t.dragElement=o.findVdomChild(t.owner.vdom,e.path[0].id).vdom,t.dragStart(e))}onStoreLoad(){this.adjustListItemCls(!0)}setData(e={}){let t=this.owner,o=t.getItemRecordId(this.getDragElementRoot().id);e.record=t.store.get(o),super.setData(e)}}Neo.applyClassConfig(r);export{r as default};