import e from"../../button/Base.mjs";import t from"../../util/Array.mjs";import r from"../../form/field/Text.mjs";class o extends e{static getStaticConfig(){return{alignValues:["left","center","right"]}}static getConfig(){return{className:"Neo.table.header.Button",ntype:"table-header-button",align_:"left",cls:["neo-table-header-button"],dataField:null,defaultSortDirection:"ASC",draggable_:!0,editorConfig:null,filterConfig:null,filterField:null,iconCls:"fa fa-arrow-circle-up",iconPosition:"right",isSorted_:null,rendererScope:null,showHeaderFilter_:!1,_vdom:{tag:"th",cn:[{tag:"button",cn:[{tag:"span",cls:["neo-button-glyph"]},{tag:"span",cls:["neo-button-text"]}]}]}}}constructor(e){super(e);let t=this,r={click:t.onButtonClick,scope:t};t.draggable&&Object.assign(r,{dragend:t.onDragEnd,dragenter:t.onDragEnter,dragleave:t.onDragLeave,dragover:t.onDragOver,dragstart:t.onDragStart,drop:t.onDrop}),t.domListeners=r}afterSetDraggable(e,t){let r=this,o=r.vdom;!0===e?r.getVdomRoot().draggable=!0:delete r.getVdomRoot().draggable,r.vdom=o}afterSetIsSorted(e,r){let o=this,l=o.cls,a=o.up("table-container");switch(e){case null:t.add(l,"neo-sort-hidden");break;case"ASC":t.remove(l,"neo-sort-desc"),t.remove(l,"neo-sort-hidden"),t.add(l,"neo-sort-asc");break;case"DESC":t.remove(l,"neo-sort-asc"),t.remove(l,"neo-sort-hidden"),t.add(l,"neo-sort-desc")}o.cls=l,a&&a.store&&o.mounted&&o.fire("sort",{direction:e,property:o.dataField})}afterSetShowHeaderFilter(e,t){let o=this,l=o.vdom;e?o.filterField?delete o.filterField.vdom.removeDom:(o.filterField=Neo.create({module:r,appName:o.appName,flag:"filter-field",hideLabel:!0,parentId:o.id,listeners:{change:o.changeFilterValue,operatorChange:o.changeFilterOperator,scope:o},style:{marginLeft:".5em",marginRight:".5em"},...o.editorConfig}),o.vdom.cn.push(o.filterField.vdom)):o.filterField&&(o.filterField.vdom.removeDom=!0),o.vdom=l}beforeSetAlign(e,t){return this.beforeSetEnumValue(e,t,"align","alignValues")}destroy(...e){this.filterField&&this.filterField.destroy(),super.destroy(...e)}getVdomRoot(){return this.vdom.cn[0]}getVnodeRoot(){return this.vnode.childNodes[0]}onButtonClick(){let e,t=this;e="DESC"===t.defaultSortDirection?{ASC:null,DESC:"ASC",null:"DESC"}:{ASC:"DESC",DESC:null,null:"ASC"},t.isSorted=e[t.isSorted+""]}onDragEnd(){let e=this.style;delete e.opacity,this.style=e}onDragEnter(){let e=this.cls;t.add(e,"neo-drag-over"),this.cls=e}onDragLeave(){let e=this.cls;t.remove(e,"neo-drag-over"),this.cls=e}onDragOver(e){}onDragStart(){let e=this.style;e.opacity=.4,this.style=e}onDrop(e){let t=this,r=Neo.getComponent(t.parentId),o=t.style,l=Neo.getComponent(r.parentId);t.onDragLeave(),r.switchItems(t.id,e.srcId),l.createViewData(l.store.data),o.opacity=1,t.style=o}changeFilterOperator(e){let t,r,o=this,l=o.up("table-container"),a=l?.store,i=e.value;a&&(t=a.getFilter(o.dataField),t?t.operator=i:(r=a.filters,r.push({property:o.dataField,operator:i,value:null,...o.filterConfig}),a.filters=r))}changeFilterValue(e){let t,r,o,l,a=this,i=a.up("table-container"),n=i?.store,d=e.value;n&&(r=n.getFilter(a.dataField),l=n.model,t=l&&l.getField(a.dataField),d&&"date"===t.type.toLowerCase()&&(d=new Date(d)),r?r.value=d:(o=n.filters,o.push({property:a.dataField,operator:"like",value:d,...a.filterConfig}),n.filters=o))}removeSortingCss(){let e=this,r=e.cls;t.add(r,"neo-sort-hidden"),e.cls=r,e._isSorted=null}renderer(e){return e.value}}Neo.applyClassConfig(o);export{o as default};